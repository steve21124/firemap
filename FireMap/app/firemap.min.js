"use strict";function InfoBox(n){n=n||{};google.maps.OverlayView.apply(this,arguments);this.content_=n.content||"";this.disableAutoPan_=n.disableAutoPan||!1;this.maxWidth_=n.maxWidth||0;this.pixelOffset_=n.pixelOffset||new google.maps.Size(0,0);this.position_=n.position||new google.maps.LatLng(0,0);this.zIndex_=n.zIndex||null;this.boxClass_=n.boxClass||"infoBox";this.boxStyle_=n.boxStyle||{};this.closeBoxMargin_=n.closeBoxMargin||"2px";this.closeBoxURL_=n.closeBoxURL||"http://www.google.com/intl/en_us/mapfiles/close.gif";""===n.closeBoxURL&&(this.closeBoxURL_="");this.infoBoxClearance_=n.infoBoxClearance||new google.maps.Size(1,1);"undefined"==typeof n.visible&&(n.visible="undefined"==typeof n.isHidden?!0:!n.isHidden);this.isHidden_=!n.visible;this.alignBottom_=n.alignBottom||!1;this.pane_=n.pane||"floatPane";this.enableEventPropagation_=n.enableEventPropagation||!1;this.div_=null;this.closeListener_=null;this.moveListener_=null;this.contextListener_=null;this.eventListeners_=null;this.fixedWidthSet_=null}function ClusterIcon(n,t){n.getMarkerClusterer().extend(ClusterIcon,google.maps.OverlayView);this.cluster_=n;this.className_=n.getMarkerClusterer().getClusterClass();this.styles_=t;this.center_=null;this.div_=null;this.sums_=null;this.visible_=!1;this.setMap(n.getMap())}function Cluster(n){this.markerClusterer_=n;this.map_=n.getMap();this.gridSize_=n.getGridSize();this.minClusterSize_=n.getMinimumClusterSize();this.averageCenter_=n.getAverageCenter();this.markers_=[];this.center_=null;this.bounds_=null;this.clusterIcon_=new ClusterIcon(this,n.getStyles())}function MarkerClusterer(n,t,i){this.extend(MarkerClusterer,google.maps.OverlayView);t=t||[];i=i||{};this.markers_=[];this.clusters_=[];this.listeners_=[];this.activeMap_=null;this.ready_=!1;this.gridSize_=i.gridSize||60;this.minClusterSize_=i.minimumClusterSize||2;this.maxZoom_=i.maxZoom||null;this.styles_=i.styles||[];this.title_=i.title||"";this.zoomOnClick_=!0;void 0!==i.zoomOnClick&&(this.zoomOnClick_=i.zoomOnClick);this.averageCenter_=!1;void 0!==i.averageCenter&&(this.averageCenter_=i.averageCenter);this.ignoreHidden_=!1;void 0!==i.ignoreHidden&&(this.ignoreHidden_=i.ignoreHidden);this.enableRetinaIcons_=!1;void 0!==i.enableRetinaIcons&&(this.enableRetinaIcons_=i.enableRetinaIcons);this.imagePath_=i.imagePath||MarkerClusterer.IMAGE_PATH;this.imageExtension_=i.imageExtension||MarkerClusterer.IMAGE_EXTENSION;this.imageSizes_=i.imageSizes||MarkerClusterer.IMAGE_SIZES;this.calculator_=i.calculator||MarkerClusterer.CALCULATOR;this.batchSize_=i.batchSize||MarkerClusterer.BATCH_SIZE;this.batchSizeIE_=i.batchSizeIE||MarkerClusterer.BATCH_SIZE_IE;this.clusterClass_=i.clusterClass||"cluster";-1!==navigator.userAgent.toLowerCase().indexOf("msie")&&(this.batchSize_=this.batchSizeIE_);this.setupStyles_();this.addMarkers(t,!0);this.setMap(n)}function inherits(n,t){function i(){}i.prototype=t.prototype;n.superClass_=t.prototype;n.prototype=new i;n.prototype.constructor=n}function MarkerLabel_(n,t){this.marker_=n;this.handCursorURL_=n.handCursorURL;this.labelDiv_=document.createElement("div");this.labelDiv_.style.cssText="position: absolute; overflow: hidden;";this.eventDiv_=document.createElement("div");this.eventDiv_.style.cssText=this.labelDiv_.style.cssText;this.eventDiv_.setAttribute("onselectstart","return false;");this.eventDiv_.setAttribute("ondragstart","return false;");this.crossDiv_=MarkerLabel_.getSharedCross(t)}function MarkerWithLabel(n){n=n||{};n.labelContent=n.labelContent||"";n.labelAnchor=n.labelAnchor||new google.maps.Point(0,0);n.labelClass=n.labelClass||"markerLabels";n.labelStyle=n.labelStyle||{};n.labelInBackground=n.labelInBackground||!1;"undefined"==typeof n.labelVisible&&(n.labelVisible=!0);"undefined"==typeof n.raiseOnDrag&&(n.raiseOnDrag=!0);"undefined"==typeof n.clickable&&(n.clickable=!0);"undefined"==typeof n.draggable&&(n.draggable=!1);"undefined"==typeof n.optimized&&(n.optimized=!1);n.crossImage=n.crossImage||"http"+("https:"===document.location.protocol?"s":"")+"://maps.gstatic.com/intl/en_us/mapfiles/drag_cross_67_16.png";n.handCursor=n.handCursor||"http"+("https:"===document.location.protocol?"s":"")+"://maps.gstatic.com/intl/en_us/mapfiles/closedhand_8_8.cur";n.optimized=!1;this.label=new MarkerLabel_(this,n.crossImage,n.handCursor);google.maps.Marker.apply(this,arguments)}(function(){var y=this,at=y._,o={},r=Array.prototype,g=Object.prototype,vt=Function.prototype,nt=r.push,i=r.slice,s=r.concat,f=g.toString,yt=g.hasOwnProperty,tt=r.forEach,it=r.map,rt=r.reduce,ut=r.reduceRight,ft=r.filter,et=r.every,ot=r.some,h=r.indexOf,st=r.lastIndexOf,pt=Array.isArray,ht=Object.keys,p=vt.bind,n=function(t){if(t instanceof n)return t;if(!(this instanceof n))return new n(t);this._wrapped=t},t,w,b,e,c,k,l,a,u,ct,lt,v;typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=n),exports._=n):y._=n;n.VERSION="1.6.0";t=n.each=n.forEach=function(t,i,r){var e,u,f;if(t==null)return t;if(tt&&t.forEach===tt)t.forEach(i,r);else if(t.length===+t.length){for(u=0,f=t.length;u<f;u++)if(i.call(r,t[u],u,t)===o)return}else for(e=n.keys(t),u=0,f=e.length;u<f;u++)if(i.call(r,t[e[u]],e[u],t)===o)return;return t};n.map=n.collect=function(n,i,r){var u=[];return n==null?u:it&&n.map===it?n.map(i,r):(t(n,function(n,t,f){u.push(i.call(r,n,t,f))}),u)};w="Reduce of empty array with no initial value";n.reduce=n.foldl=n.inject=function(i,r,u,f){var e=arguments.length>2;if(i==null&&(i=[]),rt&&i.reduce===rt)return f&&(r=n.bind(r,f)),e?i.reduce(r,u):i.reduce(r);if(t(i,function(n,t,i){e?u=r.call(f,u,n,t,i):(u=n,e=!0)}),!e)throw new TypeError(w);return u};n.reduceRight=n.foldr=function(i,r,u,f){var o=arguments.length>2,e,s;if(i==null&&(i=[]),ut&&i.reduceRight===ut)return f&&(r=n.bind(r,f)),o?i.reduceRight(r,u):i.reduceRight(r);if(e=i.length,e!==+e&&(s=n.keys(i),e=s.length),t(i,function(n,t,h){t=s?s[--e]:--e;o?u=r.call(f,u,i[t],t,h):(u=i[t],o=!0)}),!o)throw new TypeError(w);return u};n.find=n.detect=function(n,t,i){var r;return b(n,function(n,u,f){if(t.call(i,n,u,f))return r=n,!0}),r};n.filter=n.select=function(n,i,r){var u=[];return n==null?u:ft&&n.filter===ft?n.filter(i,r):(t(n,function(n,t,f){i.call(r,n,t,f)&&u.push(n)}),u)};n.reject=function(t,i,r){return n.filter(t,function(n,t,u){return!i.call(r,n,t,u)},r)};n.every=n.all=function(i,r,u){r||(r=n.identity);var f=!0;return i==null?f:et&&i.every===et?i.every(r,u):(t(i,function(n,t,i){if(!(f=f&&r.call(u,n,t,i)))return o}),!!f)};b=n.some=n.any=function(i,r,u){r||(r=n.identity);var f=!1;return i==null?f:ot&&i.some===ot?i.some(r,u):(t(i,function(n,t,i){if(f||(f=r.call(u,n,t,i)))return o}),!!f)};n.contains=n.include=function(n,t){return n==null?!1:h&&n.indexOf===h?n.indexOf(t)!=-1:b(n,function(n){return n===t})};n.invoke=function(t,r){var u=i.call(arguments,2),f=n.isFunction(r);return n.map(t,function(n){return(f?r:n[r]).apply(n,u)})};n.pluck=function(t,i){return n.map(t,n.property(i))};n.where=function(t,i){return n.filter(t,n.matches(i))};n.findWhere=function(t,i){return n.find(t,n.matches(i))};n.max=function(i,r,u){if(!r&&n.isArray(i)&&i[0]===+i[0]&&i.length<65535)return Math.max.apply(Math,i);var f=-Infinity,e=-Infinity;return t(i,function(n,t,i){var o=r?r.call(u,n,t,i):n;o>e&&(f=n,e=o)}),f};n.min=function(i,r,u){if(!r&&n.isArray(i)&&i[0]===+i[0]&&i.length<65535)return Math.min.apply(Math,i);var f=Infinity,e=Infinity;return t(i,function(n,t,i){var o=r?r.call(u,n,t,i):n;o<e&&(f=n,e=o)}),f};n.shuffle=function(i){var u,f=0,r=[];return t(i,function(t){u=n.random(f++);r[f-1]=r[u];r[u]=t}),r};n.sample=function(t,i,r){return i==null||r?(t.length!==+t.length&&(t=n.values(t)),t[n.random(t.length-1)]):n.shuffle(t).slice(0,Math.max(0,i))};e=function(t){return t==null?n.identity:n.isFunction(t)?t:n.property(t)};n.sortBy=function(t,i,r){return i=e(i),n.pluck(n.map(t,function(n,t,u){return{value:n,index:t,criteria:i.call(r,n,t,u)}}).sort(function(n,t){var i=n.criteria,r=t.criteria;if(i!==r){if(i>r||i===void 0)return 1;if(i<r||r===void 0)return-1}return n.index-t.index}),"value")};c=function(n){return function(i,r,u){var f={};return r=e(r),t(i,function(t,e){var o=r.call(u,t,e,i);n(f,o,t)}),f}};n.groupBy=c(function(t,i,r){n.has(t,i)?t[i].push(r):t[i]=[r]});n.indexBy=c(function(n,t,i){n[t]=i});n.countBy=c(function(t,i){n.has(t,i)?t[i]++:t[i]=1});n.sortedIndex=function(n,t,i,r){var f;i=e(i);for(var s=i.call(r,t),u=0,o=n.length;u<o;)f=u+o>>>1,i.call(r,n[f])<s?u=f+1:o=f;return u};n.toArray=function(t){return t?n.isArray(t)?i.call(t):t.length===+t.length?n.map(t,n.identity):n.values(t):[]};n.size=function(t){return t==null?0:t.length===+t.length?t.length:n.keys(t).length};n.first=n.head=n.take=function(n,t,r){if(n!=null)return t==null||r?n[0]:t<0?[]:i.call(n,0,t)};n.initial=function(n,t,r){return i.call(n,0,n.length-(t==null||r?1:t))};n.last=function(n,t,r){if(n!=null)return t==null||r?n[n.length-1]:i.call(n,Math.max(n.length-t,0))};n.rest=n.tail=n.drop=function(n,t,r){return i.call(n,t==null||r?1:t)};n.compact=function(t){return n.filter(t,n.identity)};k=function(i,r,u){return r&&n.every(i,n.isArray)?s.apply(u,i):(t(i,function(t){n.isArray(t)||n.isArguments(t)?r?nt.apply(u,t):k(t,r,u):u.push(t)}),u)};n.flatten=function(n,t){return k(n,t,[])};n.without=function(t){return n.difference(t,i.call(arguments,1))};n.partition=function(n,i,r){i=e(i);var u=[],f=[];return t(n,function(n){(i.call(r,n)?u:f).push(n)}),[u,f]};n.uniq=n.unique=function(i,r,u,f){n.isFunction(r)&&(f=u,u=r,r=!1);var s=u?n.map(i,u,f):i,o=[],e=[];return t(s,function(t,u){(r?u&&e[e.length-1]===t:n.contains(e,t))||(e.push(t),o.push(i[u]))}),o};n.union=function(){return n.uniq(n.flatten(arguments,!0))};n.intersection=function(t){var r=i.call(arguments,1);return n.filter(n.uniq(t),function(t){return n.every(r,function(i){return n.contains(i,t)})})};n.difference=function(t){var u=s.apply(r,i.call(arguments,1));return n.filter(t,function(t){return!n.contains(u,t)})};n.zip=function(){for(var i=n.max(n.pluck(arguments,"length").concat(0)),r=new Array(i),t=0;t<i;t++)r[t]=n.pluck(arguments,""+t);return r};n.object=function(n,t){var r,i,u;if(n==null)return{};for(r={},i=0,u=n.length;i<u;i++)t?r[n[i]]=t[i]:r[n[i][0]]=n[i][1];return r};n.indexOf=function(t,i,r){if(t==null)return-1;var u=0,f=t.length;if(r)if(typeof r=="number")u=r<0?Math.max(0,f+r):r;else return u=n.sortedIndex(t,i),t[u]===i?u:-1;if(h&&t.indexOf===h)return t.indexOf(i,r);for(;u<f;u++)if(t[u]===i)return u;return-1};n.lastIndexOf=function(n,t,i){var u,r;if(n==null)return-1;if(u=i!=null,st&&n.lastIndexOf===st)return u?n.lastIndexOf(t,i):n.lastIndexOf(t);for(r=u?i:n.length;r--;)if(n[r]===t)return r;return-1};n.range=function(n,t,i){arguments.length<=1&&(t=n||0,n=0);i=arguments[2]||1;for(var r=Math.max(Math.ceil((t-n)/i),0),u=0,f=new Array(r);u<r;)f[u++]=n,n+=i;return f};l=function(){};n.bind=function(t,r){var u,f;if(p&&t.bind===p)return p.apply(t,i.call(arguments,1));if(!n.isFunction(t))throw new TypeError;return u=i.call(arguments,2),f=function(){var e,n;return(this instanceof f)?(l.prototype=t.prototype,e=new l,l.prototype=null,n=t.apply(e,u.concat(i.call(arguments))),Object(n)===n)?n:e:t.apply(r,u.concat(i.call(arguments)))}};n.partial=function(t){var r=i.call(arguments,1);return function(){for(var f=0,i=r.slice(),u=0,e=i.length;u<e;u++)i[u]===n&&(i[u]=arguments[f++]);while(f<arguments.length)i.push(arguments[f++]);return t.apply(this,i)}};n.bindAll=function(r){var u=i.call(arguments,1);if(u.length===0)throw new Error("bindAll must be passed function names");return t(u,function(t){r[t]=n.bind(r[t],r)}),r};n.memoize=function(t,i){var r={};return i||(i=n.identity),function(){var u=i.apply(this,arguments);return n.has(r,u)?r[u]:r[u]=t.apply(this,arguments)}};n.delay=function(n,t){var r=i.call(arguments,2);return setTimeout(function(){return n.apply(null,r)},t)};n.defer=function(t){return n.delay.apply(n,[t,1].concat(i.call(arguments,1)))};n.throttle=function(t,i,r){var u,f,s,e=null,o=0,h;return r||(r={}),h=function(){o=r.leading===!1?0:n.now();e=null;s=t.apply(u,f);u=f=null},function(){var c=n.now(),l;return o||r.leading!==!1||(o=c),l=i-(c-o),u=this,f=arguments,l<=0?(clearTimeout(e),e=null,o=c,s=t.apply(u,f),u=f=null):e||r.trailing===!1||(e=setTimeout(h,l)),s}};n.debounce=function(t,i,r){var u,f,e,s,o,h=function(){var c=n.now()-s;c<i?u=setTimeout(h,i-c):(u=null,r||(o=t.apply(e,f),e=f=null))};return function(){e=this;f=arguments;s=n.now();var c=r&&!u;return u||(u=setTimeout(h,i)),c&&(o=t.apply(e,f),e=f=null),o}};n.once=function(n){var i=!1,t;return function(){return i?t:(i=!0,t=n.apply(this,arguments),n=null,t)}};n.wrap=function(t,i){return n.partial(i,t)};n.compose=function(){var n=arguments;return function(){for(var t=arguments,i=n.length-1;i>=0;i--)t=[n[i].apply(this,t)];return t[0]}};n.after=function(n,t){return function(){if(--n<1)return t.apply(this,arguments)}};n.keys=function(t){var i,r;if(!n.isObject(t))return[];if(ht)return ht(t);i=[];for(r in t)n.has(t,r)&&i.push(r);return i};n.values=function(t){for(var r=n.keys(t),u=r.length,f=new Array(u),i=0;i<u;i++)f[i]=t[r[i]];return f};n.pairs=function(t){for(var r=n.keys(t),u=r.length,f=new Array(u),i=0;i<u;i++)f[i]=[r[i],t[r[i]]];return f};n.invert=function(t){for(var u={},r=n.keys(t),i=0,f=r.length;i<f;i++)u[t[r[i]]]=r[i];return u};n.functions=n.methods=function(t){var i=[];for(var r in t)n.isFunction(t[r])&&i.push(r);return i.sort()};n.extend=function(n){return t(i.call(arguments,1),function(t){if(t)for(var i in t)n[i]=t[i]}),n};n.pick=function(n){var u={},f=s.apply(r,i.call(arguments,1));return t(f,function(t){t in n&&(u[t]=n[t])}),u};n.omit=function(t){var f={},e=s.apply(r,i.call(arguments,1));for(var u in t)n.contains(e,u)||(f[u]=t[u]);return f};n.defaults=function(n){return t(i.call(arguments,1),function(t){if(t)for(var i in t)n[i]===void 0&&(n[i]=t[i])}),n};n.clone=function(t){return n.isObject(t)?n.isArray(t)?t.slice():n.extend({},t):t};n.tap=function(n,t){return t(n),n};a=function(t,i,r,u){var l,v,h,c,e,o,s;if(t===i)return t!==0||1/t==1/i;if(t==null||i==null)return t===i;if(t instanceof n&&(t=t._wrapped),i instanceof n&&(i=i._wrapped),l=f.call(t),l!=f.call(i))return!1;switch(l){case"[object String]":return t==String(i);case"[object Number]":return t!=+t?i!=+i:t==0?1/t==1/i:t==+i;case"[object Date]":case"[object Boolean]":return+t==+i;case"[object RegExp]":return t.source==i.source&&t.global==i.global&&t.multiline==i.multiline&&t.ignoreCase==i.ignoreCase}if(typeof t!="object"||typeof i!="object")return!1;for(v=r.length;v--;)if(r[v]==t)return u[v]==i;if(h=t.constructor,c=i.constructor,h!==c&&!(n.isFunction(h)&&h instanceof h&&n.isFunction(c)&&c instanceof c)&&"constructor"in t&&"constructor"in i)return!1;if(r.push(t),u.push(i),e=0,o=!0,l=="[object Array]"){if(e=t.length,o=e==i.length,o)while(e--)if(!(o=a(t[e],i[e],r,u)))break}else{for(s in t)if(n.has(t,s)&&(e++,!(o=n.has(i,s)&&a(t[s],i[s],r,u))))break;if(o){for(s in i)if(n.has(i,s)&&!e--)break;o=!e}}return r.pop(),u.pop(),o};n.isEqual=function(n,t){return a(n,t,[],[])};n.isEmpty=function(t){if(t==null)return!0;if(n.isArray(t)||n.isString(t))return t.length===0;for(var i in t)if(n.has(t,i))return!1;return!0};n.isElement=function(n){return!!(n&&n.nodeType===1)};n.isArray=pt||function(n){return f.call(n)=="[object Array]"};n.isObject=function(n){return n===Object(n)};t(["Arguments","Function","String","Number","Date","RegExp"],function(t){n["is"+t]=function(n){return f.call(n)=="[object "+t+"]"}});n.isArguments(arguments)||(n.isArguments=function(t){"use strict";return!!(t&&n.has(t,"callee"))});typeof/./!="function"&&(n.isFunction=function(n){"use strict";return typeof n=="function"});n.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))};n.isNaN=function(t){return n.isNumber(t)&&t!=+t};n.isBoolean=function(n){return n===!0||n===!1||f.call(n)=="[object Boolean]"};n.isNull=function(n){return n===null};n.isUndefined=function(n){return n===void 0};n.has=function(n,t){return yt.call(n,t)};n.noConflict=function(){return y._=at,this};n.identity=function(n){return n};n.constant=function(n){return function(){return n}};n.property=function(n){return function(t){return t[n]}};n.matches=function(n){return function(t){if(t===n)return!0;for(var i in n)if(n[i]!==t[i])return!1;return!0}};n.times=function(n,t,i){for(var u=Array(Math.max(0,n)),r=0;r<n;r++)u[r]=t.call(i,r);return u};n.random=function(n,t){return t==null&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1))};n.now=Date.now||function(){return(new Date).getTime()};u={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};u.unescape=n.invert(u.escape);ct={escape:new RegExp("["+n.keys(u.escape).join("")+"]","g"),unescape:new RegExp("("+n.keys(u.unescape).join("|")+")","g")};n.each(["escape","unescape"],function(t){n[t]=function(n){return n==null?"":(""+n).replace(ct[t],function(n){return u[t][n]})}});n.result=function(t,i){if(t==null)return void 0;var r=t[i];return n.isFunction(r)?r.call(t):r};n.mixin=function(i){t(n.functions(i),function(t){var r=n[t]=i[t];n.prototype[t]=function(){var t=[this._wrapped];return nt.apply(t,arguments),v.call(this,r.apply(n,t))}})};lt=0;n.uniqueId=function(n){var t=++lt+"";return n?n+t:t};n.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var d=/(.)^/,wt={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},bt=/\\|'|\r|\n|\t|\u2028|\u2029/g;n.template=function(t,i,r){var f,e;r=n.defaults({},r,n.templateSettings);var h=new RegExp([(r.escape||d).source,(r.interpolate||d).source,(r.evaluate||d).source].join("|")+"|$","g"),o=0,u="__p+='";t.replace(h,function(n,i,r,f,e){return u+=t.slice(o,e).replace(bt,function(n){return"\\"+wt[n]}),i&&(u+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'"),r&&(u+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),f&&(u+="';\n"+f+"\n__p+='"),o=e+n.length,n});u+="';\n";r.variable||(u="with(obj||{}){\n"+u+"}\n");u="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+u+"return __p;\n";try{f=new Function(r.variable||"obj","_",u)}catch(s){s.source=u;throw s;}return i?f(i,n):(e=function(t){return f.call(this,t,n)},e.source="function("+(r.variable||"obj")+"){\n"+u+"}",e)};n.chain=function(t){return n(t).chain()};v=function(t){return this._chain?n(t).chain():t};n.mixin(n);t(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var i=r[t];n.prototype[t]=function(){var n=this._wrapped;return i.apply(n,arguments),(t=="shift"||t=="splice")&&n.length===0&&delete n[0],v.call(this,n)}});t(["concat","join","slice"],function(t){var i=r[t];n.prototype[t]=function(){return v.call(this,i.apply(this._wrapped,arguments))}});n.extend(n.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}});typeof define=="function"&&define.amd&&define("underscore",[],function(){"use strict";return n})}).call(this),function(n,t,i){var r="firemap",u={appName:r,dependencies:{config:r+".config",firebase:"firebase",services:r+".services",filters:r+".filters",directives:r+".directives",controllers:r+".controllers",firebaseService:r+".service.firebase",waitForAuth:"waitForAuth",routeSercurity:"routeSecurity",routeProvider:"ngRoute",firebaseLogin:"firebase.service.login",googleMaps:"google-maps",toaster:"toaster",firebase:"firebase"},dependenciesToArray:function(){return i.forEach(u.dependencies,function(n){return n})}},f;n.appSettings=u;f=t.querySelector("body");f.setAttribute("data-ng-app",r)}(window,document,window.angular),function(n,t){n.module(t.dependencies.config,[]).constant("version","0.1").constant("loginRedirectPath","/login").constant("FBURL","https://glaring-fire-1779.firebaseio.com/")}(window.angular,window.appSettings),function(n,t){n.module(t.appName,t.dependenciesToArray()).run(["loginService","$rootScope","FBURL","$location","Location","toaster","$firebase",function(t,i,r,u,f,e){var s,o;if(r==="https://INSTANCE.firebaseio.com")n.element(document.body).html("<h1>Please configure app/js/config.js before running!<\/h1>"),setTimeout(function(){n.element(document.body).removeClass("hide")},250);else if(i.auth=t.init("/login"),s=i.auth.$getCurrentUser(),i.FBURL=r,o=new Firebase(r),s.then(function(n){if(n)o.child("users/"+n.uid).once("value",function(n){i.$apply(function(){i.user=n.val()})})}),i.user)o.child("locations/").endAt().limit(1).on("child_added",function(n){var t=f.create(n.val());e.pop("info",t.toasterTitle(),"")})}])}(window.angular,window.appSettings),function(n,t){n.module(t.appName).config(["$routeProvider","$locationProvider",function(n,t){t.hashPrefix("!");n.when("/home",{templateUrl:"/app/home/home.html",controller:"HomeCtrl"});n.when("/map",{authRequired:!0,templateUrl:"/app/map/map.html",controller:"MapCtrl"});n.when("/chat",{authRequired:!0,templateUrl:"/app/chat/chat.html",controller:"ChatCtrl"});n.when("/account",{authRequired:!0,templateUrl:"/app/account/account.html",controller:"AccountCtrl"});n.when("/login",{templateUrl:"/app/auth/login.html",controller:"LoginCtrl"});n.when("/logout",{template:"Logging out!",controller:"LogoutCtrl"});n.otherwise({redirectTo:"/home"})}])}(window.angular,window.appSettings),function(n,t){function i(n){for(var t=0;t<n.length;t++)typeof n[t]=="object"&&(n[t]=i(n[t]));return n.join("/")}n.module(t.dependencies.firebaseService,["firebase"]).factory("firebaseRef",["Firebase","FBURL",function(n,t){return function(){return new n(i([t].concat(Array.prototype.slice.call(arguments))))}}]).service("syncData",["$firebase","firebaseRef",function(n,t){return function(i,r){var u=t(i);return r&&(u=u.limit(r)),n(u)}}])}(window.angular,window.appSettings),function(n,t){n.module("firebase.service.login",["firebase",t.dependencies.firebaseService]).factory("loginService",["$rootScope","$firebaseSimpleLogin","firebaseRef","profileCreator","$timeout",function(n,t,i,r,u){function e(){if(f===null)throw new Error("Must call loginService.init() before using its methods");}var f=null;return{init:function(){return f=t(i())},login:function(n,t,i){e();f.$login("password",{email:n,password:t,rememberMe:!0}).then(function(n){i&&u(function(){i(null,n)})},i)},logout:function(){e();f.$logout()},changePassword:function(n){e();var t=n.callback||function(){};n.oldpass&&n.newpass?n.newpass!==n.confirm?u(function(){t("Passwords do not match")}):f.$changePassword(n.email,n.oldpass,n.newpass).then(function(){t&&t(null)},t):u(function(){t("Please enter a password")})},createAccount:function(n,t,i){e();f.$createUser(n,t).then(function(n){i&&i(null,n)},i)},createProfile:r}}]).factory("profileCreator",["firebaseRef","$timeout",function(n,t){return function(i,r,u,f){function e(n){return o(n.substr(0,n.indexOf("@"))||"")}function o(n){n+="";var t=n.charAt(0).toUpperCase();return t+n.substr(1)}n("users/"+i).set({email:r,name:e(r),initials:u},function(n){f&&t(function(){f(n)})})}}])}(window.angular,window.appSettings),function(n){function t(n,t,i,r){this._route=i;this._location=n;this._rootScope=t;this._loginPath=r;this._redirectTo=null;this._authenticated=!!(t.auth&&t.auth.user);this._init()}n.module("routeSecurity",[]).run(["$injector","$location","$rootScope","loginRedirectPath",function(n,i,r,u){n.has("$route")&&new t(i,r,n.get("$route"),u)}]);t.prototype={_init:function(){var t=this;this._checkCurrent();t._rootScope.$on("$routeChangeStart",function(n,i){t._authRequiredRedirect(i,t._loginPath)});t._rootScope.$on("$firebaseSimpleLogin:login",n.bind(this,this._login));t._rootScope.$on("$firebaseSimpleLogin:logout",n.bind(this,this._logout));t._rootScope.$on("$firebaseSimpleLogin:error",n.bind(this,this._error))},_checkCurrent:function(){this._route.current&&this._authRequiredRedirect(this._route.current,this._loginPath)},_login:function(){this._authenticated=!0;this._redirectTo?(this._redirect(this._redirectTo),this._redirectTo=null):this._location.path()===this._loginPath&&(this._location.replace(),this._location.path("/"))},_logout:function(){this._authenticated=!1;this._checkCurrent()},_error:function(){this._rootScope.auth&&this._rootScope.auth.user||(this._authenticated=!1);this._checkCurrent()},_redirect:function(n){this._location.replace();this._location.path(n)},_authRequiredRedirect:function(n,t){n.authRequired&&!this._authenticated?(this._redirectTo=n.pathTo===undefined?this._location.path():n.pathTo===t?"/":n.pathTo,this._redirect(t)):this._authenticated&&this._location.path()===this._loginPath&&this._redirect("/")}}}(angular);angular.module("waitForAuth",[]).service("waitForAuth",function(n,t,i){function u(t){n.auth&&(n.auth.error=t instanceof Error?t.toString():null);for(var u=0;u<r.length;u++)r[u]();i(function(){f.resolve()})}var f=t.defer(),r=[];return r.push(n.$on("$firebaseSimpleLogin:login",u)),r.push(n.$on("$firebaseSimpleLogin:logout",u)),r.push(n.$on("$firebaseSimpleLogin:error",u)),f.promise}).directive("ngCloakAuth",function(n){return{restrict:"A",compile:function(t){t.addClass("hide");n.then(function(){t.removeClass("hide")})}}}).directive("ngShowAuth",function(n){function i(n,t){var i=!1;return angular.forEach(t,function(t){return t===n?(i=!0,!0):!1}),i}function r(n){if(!n)throw new Error("ng-show-auth directive must be login, logout, or error (you may use a comma-separated list)");var t=(n||"").split(",");return angular.forEach(t,function(n){if(!i(n,["login","logout","error"]))throw new Error('Invalid state "'+n+'" for ng-show-auth directive, must be one of login, logout, or error');}),!0}var t;return n.$on("$firebaseSimpleLogin:login",function(){t="login"}),n.$on("$firebaseSimpleLogin:logout",function(){t="logout"}),n.$on("$firebaseSimpleLogin:error",function(){t="error"}),{restrict:"A",compile:function(u,f){function e(n){t=n;var r=!i(n,o);u.toggleClass("hide",r)}r(f.ngShowAuth);var o=(f.ngShowAuth||"").split(",");e(t);n.$on("$firebaseSimpleLogin:login",function(){e("login")});n.$on("$firebaseSimpleLogin:logout",function(){e("logout")});n.$on("$firebaseSimpleLogin:error",function(){e("error")})}}}),function(){_.intersectionObjects=function(n,t,i){var r;return null==i&&(i=void 0),r=_.map(n,function(n){return _.find(t,function(t){return null!=i?i(n,t):_.isEqual(n,t)})}),_.filter(r,function(n){return null!=n})}}.call(this),function(){!function(){var n;return n=angular.module("google-maps",[]),n.factory("debounce",["$timeout",function(n){return function(t){var i;return i=0,function(){var r,u,f;return f=this,r=arguments,i++,u=function(n){return function(){if(n===i)return t.apply(f,r)}}(i),n(u,0,!0)}}}])}()}.call(this),function(){this.ngGmapModule=function(n,t){var i,r;return null==t&&(t=function(){}),"string"==typeof n&&(n=n.split(".")),i=this[r=n.shift()]||(this[r]={}),i.ngGmapModule||(i.ngGmapModule=this.ngGmapModule),n.length?i.ngGmapModule(n,t):t.call(i)}}.call(this),function(){angular.module("google-maps").factory("array-sync",["add-events",function(n){return function(t,i,r){var f,u,e;return u=i.$eval(r),f=n(t,{set_at:function(n){var i;return i=t.getAt(n),i&&i.lng&&i.lat?(u[n].latitude=i.lat(),u[n].longitude=i.lng()):void 0},insert_at:function(n){var i;return i=t.getAt(n),i&&i.lng&&i.lat?u.splice(n,0,{latitude:i.lat(),longitude:i.lng()}):void 0},remove_at:function(n){return u.splice(n,1)}}),e=i.$watch(r,function(n){var i,h,f,r,u,e,o,s;if(u=t,n){for(i=0,e=u.getLength(),f=n.length,h=Math.min(e,f),r=void 0;h>i;)o=u.getAt(i),r=n[i],(o.lat()!==r.latitude||o.lng()!==r.longitude)&&u.setAt(i,new google.maps.LatLng(r.latitude,r.longitude)),i++;for(;f>i;)r=n[i],u.push(new google.maps.LatLng(r.latitude,r.longitude)),i++;for(s=[];e>i;)u.pop(),s.push(i++);return s}},!0),function(){return f&&(f(),f=null),e?(e(),e=null):void 0}}}])}.call(this),function(){angular.module("google-maps").factory("add-events",["$timeout",function(n){var t,i;return t=function(t,i,r){return google.maps.event.addListener(t,i,function(){return r.apply(this,arguments),n(function(){},!0)})},i=function(n,i,r){var u;return r?t(n,i,r):(u=[],angular.forEach(i,function(i,r){return u.push(t(n,r,i))}),function(){return angular.forEach(u,function(n){return _.isFunction(n)&&n(),null!==n.e&&_.isFunction(n.e)?n.e():void 0}),u=null})}}])}.call(this),function(){var n=[].indexOf||function(n){for(var t=0,i=this.length;i>t;t++)if(t in this&&this[t]===n)return t;return-1};this.ngGmapModule("oo",function(){var t;return t=["extended","included"],this.BaseObject=function(){function i(){}return i.extend=function(i){var r,u,f;for(r in i)u=i[r],n.call(t,r)<0&&(this[r]=u);return null!=(f=i.extended)&&f.apply(0),this},i.include=function(i){var r,u,f;for(r in i)u=i[r],n.call(t,r)<0&&(this.prototype[r]=u);return null!=(f=i.included)&&f.apply(0),this},i}()})}.call(this),function(){var n=function(n,t){return function(){return n.apply(t,arguments)}},t={}.hasOwnProperty,i=function(n,i){function u(){this.constructor=n}for(var r in i)t.call(i,r)&&(n[r]=i[r]);return u.prototype=i.prototype,n.prototype=new u,n.__super__=i.prototype,n};this.ngGmapModule("directives.api.managers",function(){return this.ClustererMarkerManager=function(t){function r(t,i,u){this.clear=n(this.clear,this);this.draw=n(this.draw,this);this.removeMany=n(this.removeMany,this);this.remove=n(this.remove,this);this.addMany=n(this.addMany,this);this.add=n(this.add,this);var f;r.__super__.constructor.call(this);f=this;this.opt_options=u;this.clusterer=null!=u&&void 0===i?new MarkerClusterer(t,void 0,u):null!=u&&null!=i?new MarkerClusterer(t,i,u):new MarkerClusterer(t);this.clusterer.setIgnoreHidden(!0);this.$log=directives.api.utils.Logger;this.noDrawOnSingleAddRemoves=!0;this.$log.info(this)}return i(r,t),r.prototype.add=function(n){return this.clusterer.addMarker(n,this.noDrawOnSingleAddRemoves)},r.prototype.addMany=function(n){return this.clusterer.addMarkers(n)},r.prototype.remove=function(n){return this.clusterer.removeMarker(n,this.noDrawOnSingleAddRemoves)},r.prototype.removeMany=function(n){return this.clusterer.addMarkers(n)},r.prototype.draw=function(){return this.clusterer.repaint()},r.prototype.clear=function(){return this.clusterer.clearMarkers(),this.clusterer.repaint()},r}(oo.BaseObject)})}.call(this),function(){var n=function(n,t){return function(){return n.apply(t,arguments)}},t={}.hasOwnProperty,i=function(n,i){function u(){this.constructor=n}for(var r in i)t.call(i,r)&&(n[r]=i[r]);return u.prototype=i.prototype,n.prototype=new u,n.__super__=i.prototype,n};this.ngGmapModule("directives.api.managers",function(){return this.MarkerManager=function(t){function r(t){this.handleOptDraw=n(this.handleOptDraw,this);this.clear=n(this.clear,this);this.draw=n(this.draw,this);this.removeMany=n(this.removeMany,this);this.remove=n(this.remove,this);this.addMany=n(this.addMany,this);this.add=n(this.add,this);var i;r.__super__.constructor.call(this);i=this;this.gMap=t;this.gMarkers=[];this.$log=directives.api.utils.Logger;this.$log.info(this)}return i(r,t),r.prototype.add=function(n,t){return this.handleOptDraw(n,t,!0),this.gMarkers.push(n)},r.prototype.addMany=function(n){var r,t,u,i;for(i=[],t=0,u=n.length;u>t;t++)r=n[t],i.push(this.add(r));return i},r.prototype.remove=function(n,t){var i,r;return this.handleOptDraw(n,t,!1),t?(i=void 0,null!=this.gMarkers.indexOf?i=this.gMarkers.indexOf(n):(r=0,_.find(this.gMarkers,function(t){r+=1;t===n&&(i=r)})),null!=i?this.gMarkers.splice(i,1):void 0):void 0},r.prototype.removeMany=function(){var r,n,u,t,i;for(t=this.gMarkers,i=[],n=0,u=t.length;u>n;n++)r=t[n],i.push(this.remove(r));return i},r.prototype.draw=function(){var n,t,e,i,r,o,s,u,f,h=this;for(n=[],u=this.gMarkers,e=function(t){if(!t.isDrawn)return t.doAdd?t.setMap(h.gMap):n.push(t)},i=0,o=u.length;o>i;i++)t=u[i],e(t);for(f=[],r=0,s=n.length;s>r;r++)t=n[r],f.push(this.remove(t,!0));return f},r.prototype.clear=function(){var i,n,r,t;for(t=this.gMarkers,n=0,r=t.length;r>n;n++)i=t[n],i.setMap(null);return delete this.gMarkers,this.gMarkers=[]},r.prototype.handleOptDraw=function(n,t,i){return t===!0?(n.setMap(i?this.gMap:null),n.isDrawn=!0):(n.isDrawn=!1,n.doAdd=i)},r}(oo.BaseObject)})}.call(this),function(){this.ngGmapModule("directives.api.utils",function(){return this.AsyncProcessor={handleLargeArray:function(n,t,i,r,u,f){var e;return null==u&&(u=100),null==f&&(f=0),void 0===n||n.length<=0?void r():(e=function(){for(var s=u,o=f;s--&&o<n.length;)t(n[o]),++o;return o<n.length?(f=o,null!=i&&i(),setTimeout(e,1)):r()})()}}})}.call(this),function(){this.ngGmapModule("directives.api.utils",function(){return this.ChildEvents={onChildCreation:function(){}}})}.call(this),function(){this.ngGmapModule("directives.api.utils",function(){return this.GmapUtil={getLabelPositionPoint:function(n){var t,i;if(void 0!==n)return(n=/^([\d\.]+)\s([\d\.]+)$/.exec(n),t=n[1],i=n[2],t&&i?new google.maps.Point(t,i):void 0)},createMarkerOptions:function(n,t,i,r){var u;return null==r&&(r=void 0),null==i&&(i={}),u=angular.extend({},i,{position:null!=i.position?i.position:new google.maps.LatLng(n.latitude,n.longitude),icon:null!=i.icon?i.icon:t,visible:null!=i.visible?i.visible:null!=n.latitude&&null!=n.longitude}),null!=r&&(u.map=r),u},createWindowOptions:function(n,t,i,r){return null!=i&&null!=r?angular.extend({},r,{content:null!=r.content?r.content:i,position:null!=r.position?r.position:angular.isObject(n)?n.getPosition():new google.maps.LatLng(t.coords.latitude,t.coords.longitude)}):r?r:void 0},defaultDelay:50}})}.call(this),function(){var n={}.hasOwnProperty,t=function(t,i){function u(){this.constructor=t}for(var r in i)n.call(i,r)&&(t[r]=i[r]);return u.prototype=i.prototype,t.prototype=new u,t.__super__=i.prototype,t};this.ngGmapModule("directives.api.utils",function(){return this.Linked=function(n){function i(n,t,i,r){this.scope=n;this.element=t;this.attrs=i;this.ctrls=r}return t(i,n),i}(oo.BaseObject)})}.call(this),function(){this.ngGmapModule("directives.api.utils",function(){var n;return this.Logger={logger:void 0,doLog:!1,info:function(t){if(n.doLog)return null!=n.logger?n.logger.info(t):console.info(t)},error:function(t){if(n.doLog)return null!=n.logger?n.logger.error(t):console.error(t)}},n=this.Logger})}.call(this),function(){this.ngGmapModule("directives.api.utils",function(){return this.ModelsWatcher={didModelsChange:function(n,t){var i,r;return _.isArray(n)?n===t?!1:(r=_.intersectionObjects(n,t).length!==t.length,i=!0,r||(i=n.length!==t.length),i):(directives.api.utils.Logger.error("models property must be an array newValue of: "+n.toString()+" is not!!"),!1)}}})}.call(this),function(){var n=function(n,t){return function(){return n.apply(t,arguments)}},t={}.hasOwnProperty,i=function(n,i){function u(){this.constructor=n}for(var r in i)t.call(i,r)&&(n[r]=i[r]);return u.prototype=i.prototype,n.prototype=new u,n.__super__=i.prototype,n};this.ngGmapModule("directives.api.models.child",function(){return this.MarkerLabelChildModel=function(t){function r(t,i){this.destroy=n(this.destroy,this);this.draw=n(this.draw,this);this.setPosition=n(this.setPosition,this);this.setZIndex=n(this.setZIndex,this);this.setVisible=n(this.setVisible,this);this.setAnchor=n(this.setAnchor,this);this.setMandatoryStyles=n(this.setMandatoryStyles,this);this.setStyles=n(this.setStyles,this);this.setContent=n(this.setContent,this);this.setTitle=n(this.setTitle,this);this.getSharedCross=n(this.getSharedCross,this);var u,f,e;r.__super__.constructor.call(this);u=this;this.marker=t;this.marker.set("labelContent",i.labelContent);this.marker.set("labelAnchor",this.getLabelPositionPoint(i.labelAnchor));this.marker.set("labelClass",i.labelClass||"labels");this.marker.set("labelStyle",i.labelStyle||{opacity:100});this.marker.set("labelInBackground",i.labelInBackground||!1);i.labelVisible||this.marker.set("labelVisible",!0);i.raiseOnDrag||this.marker.set("raiseOnDrag",!0);i.clickable||this.marker.set("clickable",!0);i.draggable||this.marker.set("draggable",!1);i.optimized||this.marker.set("optimized",!1);i.crossImage=null!=(f=i.crossImage)?f:document.location.protocol+"//maps.gstatic.com/intl/en_us/mapfiles/drag_cross_67_16.png";i.handCursor=null!=(e=i.handCursor)?e:document.location.protocol+"//maps.gstatic.com/intl/en_us/mapfiles/closedhand_8_8.cur";this.markerLabel=new MarkerLabel_(this.marker,i.crossImage,i.handCursor);this.marker.set("setMap",function(n){return google.maps.Marker.prototype.setMap.apply(this,arguments),u.markerLabel.setMap(n)});this.marker.setMap(this.marker.getMap())}return i(r,t),r.include(directives.api.utils.GmapUtil),r.prototype.getSharedCross=function(n){return this.markerLabel.getSharedCross(n)},r.prototype.setTitle=function(){return this.markerLabel.setTitle()},r.prototype.setContent=function(){return this.markerLabel.setContent()},r.prototype.setStyles=function(){return this.markerLabel.setStyles()},r.prototype.setMandatoryStyles=function(){return this.markerLabel.setMandatoryStyles()},r.prototype.setAnchor=function(){return this.markerLabel.setAnchor()},r.prototype.setVisible=function(){return this.markerLabel.setVisible()},r.prototype.setZIndex=function(){return this.markerLabel.setZIndex()},r.prototype.setPosition=function(){return this.markerLabel.setPosition()},r.prototype.draw=function(){return this.markerLabel.draw()},r.prototype.destroy=function(){if(null!=this.markerLabel.labelDiv_.parentNode&&null!=this.markerLabel.eventDiv_.parentNode)return this.markerLabel.onRemove()},r}(oo.BaseObject)})}.call(this),function(){var n=function(n,t){return function(){return n.apply(t,arguments)}},t={}.hasOwnProperty,i=function(n,i){function u(){this.constructor=n}for(var r in i)t.call(i,r)&&(n[r]=i[r]);return u.prototype=i.prototype,n.prototype=new u,n.__super__=i.prototype,n};this.ngGmapModule("directives.api.models.child",function(){return this.MarkerChildModel=function(t){function r(t,i,r,u,f,e,o,s){var h,c=this;this.index=t;this.model=i;this.parentScope=r;this.gMap=u;this.defaults=e;this.doClick=o;this.gMarkerManager=s;this.watchDestroy=n(this.watchDestroy,this);this.setLabelOptions=n(this.setLabelOptions,this);this.isLabelDefined=n(this.isLabelDefined,this);this.setOptions=n(this.setOptions,this);this.setIcon=n(this.setIcon,this);this.setCoords=n(this.setCoords,this);this.destroy=n(this.destroy,this);this.maybeSetScopeValue=n(this.maybeSetScopeValue,this);this.createMarker=n(this.createMarker,this);this.setMyScope=n(this.setMyScope,this);h=this;this.iconKey=this.parentScope.icon;this.coordsKey=this.parentScope.coords;this.clickKey=this.parentScope.click();this.labelContentKey=this.parentScope.labelContent;this.optionsKey=this.parentScope.options;this.labelOptionsKey=this.parentScope.labelOptions;this.myScope=this.parentScope.$new(!1);this.myScope.model=this.model;this.setMyScope(this.model,void 0,!0);this.createMarker(this.model);this.myScope.$watch("model",function(n,t){if(n!==t)return c.setMyScope(n,t)},!0);this.$log=directives.api.utils.Logger;this.$log.info(h);this.watchDestroy(this.myScope)}return i(r,t),r.include(directives.api.utils.GmapUtil),r.prototype.setMyScope=function(n,t,i){return null==t&&(t=void 0),null==i&&(i=!1),this.maybeSetScopeValue("icon",n,t,this.iconKey,this.evalModelHandle,i,this.setIcon),this.maybeSetScopeValue("coords",n,t,this.coordsKey,this.evalModelHandle,i,this.setCoords),this.maybeSetScopeValue("labelContent",n,t,this.labelContentKey,this.evalModelHandle,i),this.maybeSetScopeValue("click",n,t,this.clickKey,this.evalModelHandle,i),this.createMarker(n,t,i)},r.prototype.createMarker=function(n,t,i){var r=this;return null==t&&(t=void 0),null==i&&(i=!1),this.maybeSetScopeValue("options",n,t,this.optionsKey,function(n,t){var i;if(void 0!==n)return(i="self"===t?n:n[t],void 0===i?i=void 0===t?r.defaults:r.myScope.options:i)},i,this.setOptions)},r.prototype.evalModelHandle=function(n,t){if(void 0!==n)return"self"===t?n:n[t]},r.prototype.maybeSetScopeValue=function(n,t,i,r,u,f,e){var o,s;return null==e&&(e=void 0),void 0===i?(this.myScope[n]=u(t,r),void(f||null!=e&&e(this.myScope))):(s=u(i,r),o=u(t,r),o===s||this.myScope[n]===o||(this.myScope[n]=o,f)?void 0:(null!=e&&e(this.myScope),this.gMarkerManager.draw()))},r.prototype.destroy=function(){return this.myScope.$destroy()},r.prototype.setCoords=function(n){if(n.$id===this.myScope.$id&&void 0!==this.gMarker)return null!=n.coords?null==this.scope.coords.latitude||null==this.scope.coords.longitude?void this.$log.error("MarkerChildMarker cannot render marker as scope.coords as no position on marker: "+JSON.stringify(this.model)):(this.gMarker.setPosition(new google.maps.LatLng(n.coords.latitude,n.coords.longitude)),this.gMarker.setVisible(null!=n.coords.latitude&&null!=n.coords.longitude),this.gMarkerManager.remove(this.gMarker),this.gMarkerManager.add(this.gMarker)):this.gMarkerManager.remove(this.gMarker)},r.prototype.setIcon=function(n){if(n.$id===this.myScope.$id&&void 0!==this.gMarker)return(this.gMarkerManager.remove(this.gMarker),this.gMarker.setIcon(n.icon),this.gMarkerManager.add(this.gMarker),this.gMarker.setPosition(new google.maps.LatLng(n.coords.latitude,n.coords.longitude)),this.gMarker.setVisible(n.coords.latitude&&null!=n.coords.longitude))},r.prototype.setOptions=function(n){var i,t=this;if(n.$id===this.myScope.$id&&(null!=this.gMarker&&(this.gMarkerManager.remove(this.gMarker),delete this.gMarker),null!=(i=n.coords)?i:"function"==typeof n.icon?n.icon(null!=n.options):void 0))return this.opts=this.createMarkerOptions(n.coords,n.icon,n.options),delete this.gMarker,this.gMarker=this.isLabelDefined(n)?new MarkerWithLabel(this.setLabelOptions(this.opts,n)):new google.maps.Marker(this.opts),this.gMarkerManager.add(this.gMarker),google.maps.event.addListener(this.gMarker,"click",function(){"use strict";if(t.doClick&&null!=t.myScope.click)return t.myScope.click()})},r.prototype.isLabelDefined=function(n){return null!=n.labelContent},r.prototype.setLabelOptions=function(n,t){return n.labelAnchor=this.getLabelPositionPoint(t.labelAnchor),n.labelClass=t.labelClass,n.labelContent=t.labelContent,n},r.prototype.watchDestroy=function(n){var t=this;return n.$on("$destroy",function(){var n;return null!=t.gMarker&&(t.gMarkerManager.remove(t.gMarker),delete t.gMarker),n=void 0})},r}(oo.BaseObject)})}.call(this),function(){var n=function(n,t){return function(){return n.apply(t,arguments)}},t={}.hasOwnProperty,i=function(n,i){function u(){this.constructor=n}for(var r in i)t.call(i,r)&&(n[r]=i[r]);return u.prototype=i.prototype,n.prototype=new u,n.__super__=i.prototype,n};this.ngGmapModule("directives.api.models.child",function(){return this.WindowChildModel=function(t){function r(t,i,r,u,f,e,o,s,h,c){this.element=h;null==c&&(c=!1);this.destroy=n(this.destroy,this);this.hideWindow=n(this.hideWindow,this);this.getLatestPosition=n(this.getLatestPosition,this);this.showWindow=n(this.showWindow,this);this.handleClick=n(this.handleClick,this);this.watchCoords=n(this.watchCoords,this);this.watchShow=n(this.watchShow,this);this.createGWin=n(this.createGWin,this);this.scope=t;this.opts=i;this.mapCtrl=u;this.markerCtrl=f;this.isIconVisibleOnClick=r;this.initialMarkerVisibility=null!=this.markerCtrl?this.markerCtrl.getVisible():!1;this.$log=directives.api.utils.Logger;this.$http=e;this.$templateCache=o;this.$compile=s;this.createGWin();null!=this.markerCtrl&&this.markerCtrl.setClickable(!0);this.handleClick();this.watchShow();this.watchCoords();this.needToManualDestroy=c;this.$log.info(this)}return i(r,t),r.include(directives.api.utils.GmapUtil),r.prototype.createGWin=function(){var t,i,n=this;return null==this.gWin&&null!=this.markerCtrl&&(t=null!=this.opts?this.opts:{},i=null!=this.element&&_.isFunction(this.element.html)?this.element.html():this.element,this.opts=null!=this.markerCtrl?this.createWindowOptions(this.markerCtrl,this.scope,i,t):{}),null!=this.opts&&void 0===this.gWin?(this.gWin=this.opts.boxClass&&window.InfoBox&&"function"==typeof window.InfoBox?new window.InfoBox(this.opts):new google.maps.InfoWindow(this.opts),google.maps.event.addListener(this.gWin,"closeclick",function(){return null!=n.markerCtrl&&n.markerCtrl.setVisible(n.initialMarkerVisibility),null!=n.scope.closeClick?n.scope.closeClick():void 0})):void 0},r.prototype.watchShow=function(){var n=this;return this.scope.$watch("show",function(t,i){return t!==i?t?n.showWindow():n.hideWindow():null!=n.gWin&&t&&!n.gWin.getMap()?n.showWindow():void 0},!0)},r.prototype.watchCoords=function(){var t,n=this;return t=null!=this.markerCtrl?this.scope.$parent:this.scope,t.$watch("coords",function(t,i){if(t!==i)return null==t?n.hideWindow():null==t.latitude||null==t.longitude?void n.$log.error("WindowChildMarker cannot render marker as scope.coords as no position on marker: "+JSON.stringify(n.model)):n.gWin.setPosition(new google.maps.LatLng(t.latitude,t.longitude))},!0)},r.prototype.handleClick=function(){var n=this;if(null!=this.markerCtrl)return google.maps.event.addListener(this.markerCtrl,"click",function(){var t;return null==n.gWin&&n.createGWin(),t=n.markerCtrl.getPosition(),null!=n.gWin&&(n.gWin.setPosition(t),n.gWin.open(n.mapCtrl)),n.initialMarkerVisibility=n.markerCtrl.getVisible(),n.markerCtrl.setVisible(n.isIconVisibleOnClick)})},r.prototype.showWindow=function(){var n=this;if(this.scope.templateUrl){if(this.gWin)return this.$http.get(this.scope.templateUrl,{cache:this.$templateCache}).then(function(t){"use strict";var r,i;return i=n.scope.$new(),angular.isDefined(n.scope.templateParameter)&&(i.parameter=n.scope.templateParameter),r=n.$compile(t.data)(i),n.gWin.setContent(r[0]),n.gWin.open(n.mapCtrl)})}else if(null!=this.gWin)return this.gWin.open(this.mapCtrl)},r.prototype.getLatestPosition=function(){if(null!=this.gWin&&null!=this.markerCtrl)return this.gWin.setPosition(this.markerCtrl.getPosition())},r.prototype.hideWindow=function(){if(null!=this.gWin)return this.gWin.close()},r.prototype.destroy=function(){var n;return this.hideWindow(this.gWin),null!=this.scope&&this.needToManualDestroy&&this.scope.$destroy(),delete this.gWin,n=void 0},r}(oo.BaseObject)})}.call(this),function(){var n=function(n,t){return function(){return n.apply(t,arguments)}},t={}.hasOwnProperty,i=function(n,i){function u(){this.constructor=n}for(var r in i)t.call(i,r)&&(n[r]=i[r]);return u.prototype=i.prototype,n.prototype=new u,n.__super__=i.prototype,n};this.ngGmapModule("directives.api.models.parent",function(){return this.IMarkerParentModel=function(t){function r(t,i,r,u,f){var o,e=this;this.scope=t;this.element=i;this.attrs=r;this.mapCtrl=u;this.$timeout=f;this.linkInit=n(this.linkInit,this);this.onDestroy=n(this.onDestroy,this);this.onWatch=n(this.onWatch,this);this.watch=n(this.watch,this);this.validateScope=n(this.validateScope,this);this.onTimeOut=n(this.onTimeOut,this);o=this;this.$log=directives.api.utils.Logger;this.validateScope(t)&&(this.doClick=angular.isDefined(r.click),null!=t.options&&(this.DEFAULTS=t.options),this.$timeout(function(){return e.watch("coords",t),e.watch("icon",t),e.watch("options",t),e.onTimeOut(t),t.$on("$destroy",function(){return e.onDestroy(t)})}))}return i(r,t),r.prototype.DEFAULTS={},r.prototype.isFalse=function(n){return-1!==["false","FALSE",0,"n","N","no","NO"].indexOf(n)},r.prototype.onTimeOut=function(){},r.prototype.validateScope=function(n){var t;return null==n?!1:(t=null!=n.coords,t||this.$log.error(this.constructor.name+": no valid coords attribute found"),t)},r.prototype.watch=function(n,t){var i=this;return t.$watch(n,function(r,u){if(r!==u)return i.onWatch(n,t,r,u)},!0)},r.prototype.onWatch=function(){throw new Exception("Not Implemented!!");},r.prototype.onDestroy=function(){throw new Exception("Not Implemented!!");},r.prototype.linkInit=function(){throw new Exception("Not Implemented!!");},r}(oo.BaseObject)})}.call(this),function(){var n={}.hasOwnProperty,t=function(t,i){function u(){this.constructor=t}for(var r in i)n.call(i,r)&&(t[r]=i[r]);return u.prototype=i.prototype,t.prototype=new u,t.__super__=i.prototype,t};this.ngGmapModule("directives.api.models.parent",function(){return this.IWindowParentModel=function(n){function i(n,t,i,r,u,f,e,o){var s;s=this;this.$log=directives.api.utils.Logger;this.$timeout=u;this.$compile=f;this.$http=e;this.$templateCache=o;null!=n.options&&(this.DEFAULTS=n.options)}return t(i,n),i.include(directives.api.utils.GmapUtil),i.prototype.DEFAULTS={},i}(oo.BaseObject)})}.call(this),function(){var n=function(n,t){return function(){return n.apply(t,arguments)}},t={}.hasOwnProperty,i=function(n,i){function u(){this.constructor=n}for(var r in i)t.call(i,r)&&(n[r]=i[r]);return u.prototype=i.prototype,n.prototype=new u,n.__super__=i.prototype,n};this.ngGmapModule("directives.api.models.parent",function(){return this.LayerParentModel=function(t){function r(t,i,r,u,f,e,o){var s=this;return this.scope=t,this.element=i,this.attrs=r,this.mapCtrl=u,this.$timeout=f,this.onLayerCreated=null!=e?e:void 0,this.$log=null!=o?o:directives.api.utils.Logger,this.createGoogleLayer=n(this.createGoogleLayer,this),null==this.attrs.type?void this.$log.info("type attribute for the layer directive is mandatory. Layer creation aborted!!"):(this.createGoogleLayer(),this.gMap=void 0,this.doShow=!0,void this.$timeout(function(){return s.gMap=u.getMap(),angular.isDefined(s.attrs.show)&&(s.doShow=s.scope.show),null!==s.doShow&&s.doShow&&null!==s.gMap&&s.layer.setMap(s.gMap),s.scope.$watch("show",function(n,t){if(n!==t)return(s.doShow=n,s.layer.setMap(n?s.gMap:null))},!0),s.scope.$watch("options",function(n,t){if(n!==t)return(s.layer.setMap(null),s.layer=null,s.createGoogleLayer())},!0),s.scope.$on("$destroy",function(){return this.layer.setMap(null)})}))}return i(r,t),r.prototype.createGoogleLayer=function(){var n=this;return this.layer=null==this.attrs.options?void 0===this.attrs.namespace?new google.maps[this.attrs.type]:new google.maps[this.attrs.namespace][this.attrs.type]:void 0===this.attrs.namespace?new google.maps[this.attrs.type](this.scope.options):new google.maps[this.attrs.namespace][this.attrs.type](this.scope.options),this.$timeout(function(){var t;if(null!=n.layer&&null!=n.onLayerCreated&&(t=n.onLayerCreated(n.scope,n.layer)))return t(n.layer)})},r}(oo.BaseObject)})}.call(this),function(){var n=function(n,t){return function(){return n.apply(t,arguments)}},t={}.hasOwnProperty,i=function(n,i){function u(){this.constructor=n}for(var r in i)t.call(i,r)&&(n[r]=i[r]);return u.prototype=i.prototype,n.prototype=new u,n.__super__=i.prototype,n};this.ngGmapModule("directives.api.models.parent",function(){return this.MarkerParentModel=function(t){function r(t,i,u,f,e){this.onDestroy=n(this.onDestroy,this);this.onWatch=n(this.onWatch,this);this.onTimeOut=n(this.onTimeOut,this);var o;r.__super__.constructor.call(this,t,i,u,f,e);o=this}return i(r,t),r.include(directives.api.utils.GmapUtil),r.prototype.onTimeOut=function(n){var i,t=this;return i=this.createMarkerOptions(n.coords,n.icon,n.options,this.mapCtrl.getMap()),this.scope.gMarker=new google.maps.Marker(i),google.maps.event.addListener(this.scope.gMarker,"click",function(){if(t.doClick&&null!=n.click)return t.$timeout(function(){return t.scope.click()})}),this.setEvents(this.scope.gMarker,n),this.$log.info(this)},r.prototype.onWatch=function(n,t){switch(n){case"coords":return null!=t.coords&&null!=this.scope.gMarker?(this.scope.gMarker.setMap(this.mapCtrl.getMap()),this.scope.gMarker.setPosition(new google.maps.LatLng(t.coords.latitude,t.coords.longitude)),this.scope.gMarker.setVisible(null!=t.coords.latitude&&null!=t.coords.longitude),this.scope.gMarker.setOptions(t.options)):this.scope.gMarker.setMap(null);case"icon":if(null!=t.icon&&null!=t.coords&&null!=this.scope.gMarker)return this.scope.gMarker.setOptions(t.options),this.scope.gMarker.setIcon(t.icon),this.scope.gMarker.setMap(null),this.scope.gMarker.setMap(this.mapCtrl.getMap()),this.scope.gMarker.setPosition(new google.maps.LatLng(t.coords.latitude,t.coords.longitude)),this.scope.gMarker.setVisible(t.coords.latitude&&null!=t.coords.longitude);break;case"options":if(null!=t.coords&&null!=t.icon&&t.options)return null!=this.scope.gMarker&&this.scope.gMarker.setMap(null),delete this.scope.gMarker,this.scope.gMarker=new google.maps.Marker(this.createMarkerOptions(t.coords,t.icon,t.options,this.mapCtrl.getMap()))}},r.prototype.onDestroy=function(){var n;return void 0===this.scope.gMarker?void(n=void 0):(this.scope.gMarker.setMap(null),delete this.scope.gMarker,n=void 0)},r.prototype.setEvents=function(n,t){var f,i,r,u;if(angular.isDefined(t.events)&&null!=t.events&&angular.isObject(t.events)){r=t.events;u=[];for(i in r)f=r[i],u.push(t.events.hasOwnProperty(i)&&angular.isFunction(t.events[i])?google.maps.event.addListener(n,i,function(){"use strict";return f.apply(t,[n,i,arguments])}):void 0);return u}},r}(directives.api.models.parent.IMarkerParentModel)})}.call(this),function(){var n=function(n,t){return function(){return n.apply(t,arguments)}},t={}.hasOwnProperty,i=function(n,i){function u(){this.constructor=n}for(var r in i)t.call(i,r)&&(n[r]=i[r]);return u.prototype=i.prototype,n.prototype=new u,n.__super__=i.prototype,n};this.ngGmapModule("directives.api.models.parent",function(){return this.MarkersParentModel=function(t){function r(t,i,u,f,e){this.fit=n(this.fit,this);this.onDestroy=n(this.onDestroy,this);this.onWatch=n(this.onWatch,this);this.reBuildMarkers=n(this.reBuildMarkers,this);this.createMarkers=n(this.createMarkers,this);this.validateScope=n(this.validateScope,this);this.onTimeOut=n(this.onTimeOut,this);var o;r.__super__.constructor.call(this,t,i,u,f,e);o=this;this.markersIndex=0;this.gMarkerManager=void 0;this.scope=t;this.scope.markerModels=[];this.bigGulp=directives.api.utils.AsyncProcessor;this.$timeout=e;this.$log.info(this)}return i(r,t),r.include(directives.api.utils.ModelsWatcher),r.prototype.onTimeOut=function(n){return this.watch("models",n),this.watch("doCluster",n),this.watch("clusterOptions",n),this.watch("fit",n),this.createMarkers(n)},r.prototype.validateScope=function(n){var t;return t=angular.isUndefined(n.models)||void 0===n.models,t&&this.$log.error(this.constructor.name+": no valid models attribute found"),r.__super__.validateScope.call(this,n)||t},r.prototype.createMarkers=function(n){var i,t=this;return null!=n.doCluster&&n.doCluster===!0?null!=n.clusterOptions?void 0===this.gMarkerManager?this.gMarkerManager=new directives.api.managers.ClustererMarkerManager(this.mapCtrl.getMap(),void 0,n.clusterOptions):this.gMarkerManager.opt_options!==n.clusterOptions&&(this.gMarkerManager=new directives.api.managers.ClustererMarkerManager(this.mapCtrl.getMap(),void 0,n.clusterOptions)):this.gMarkerManager=new directives.api.managers.ClustererMarkerManager(this.mapCtrl.getMap()):this.gMarkerManager=new directives.api.managers.MarkerManager(this.mapCtrl.getMap()),i=[],n.isMarkerModelsReady=!1,this.bigGulp.handleLargeArray(n.models,function(r){var u;return n.doRebuild=!0,u=new directives.api.models.child.MarkerChildModel(t.markersIndex,r,n,t.mapCtrl,t.$timeout,t.DEFAULTS,t.doClick,t.gMarkerManager),t.$log.info("child",u,"markers",i),i.push(u),t.markersIndex++},function(){},function(){return t.gMarkerManager.draw(),n.markerModels=i,angular.isDefined(t.attrs.fit)&&null!=n.fit&&n.fit&&t.fit(),n.isMarkerModelsReady=!0,null!=n.onMarkerModelsReady?n.onMarkerModelsReady(n):void 0})},r.prototype.reBuildMarkers=function(n){if(n.doRebuild||void 0===n.doRebuild)return _.each(n.markerModels,function(n){"use strict";return n.destroy()}),this.markersIndex=0,null!=this.gMarkerManager&&this.gMarkerManager.clear(),this.createMarkers(n)},r.prototype.onWatch=function(n,t,i,r){if("models"!==n||this.didModelsChange(i,r))return"options"===n&&null!=i?void(this.DEFAULTS=i):this.reBuildMarkers(t)},r.prototype.onDestroy=function(n){var r,t,u,i;for(i=n.markerModels,t=0,u=i.length;u>t;t++)r=i[t],r.destroy();if(null!=this.gMarkerManager)return this.gMarkerManager.clear()},r.prototype.fit=function(){var t,n;if(this.mapCtrl&&null!=this.scope.markerModels&&this.scope.markerModels.length>0&&(t=new google.maps.LatLngBounds,n=!1,_.each(this.scope.markerModels,function(i){if(null!=i.gMarker)return(n||(n=!0),t.extend(i.gMarker.getPosition()))}),n))return this.mapCtrl.getMap().fitBounds(t)},r}(directives.api.models.parent.IMarkerParentModel)})}.call(this),function(){var n=function(n,t){return function(){return n.apply(t,arguments)}},t={}.hasOwnProperty,i=function(n,i){function u(){this.constructor=n}for(var r in i)t.call(i,r)&&(n[r]=i[r]);return u.prototype=i.prototype,n.prototype=new u,n.__super__=i.prototype,n};this.ngGmapModule("directives.api.models.parent",function(){return this.WindowsParentModel=function(t){function r(t,i,u,f,e,o,s,h,c){this.interpolateContent=n(this.interpolateContent,this);this.setChildScope=n(this.setChildScope,this);this.createWindow=n(this.createWindow,this);this.setContentKeys=n(this.setContentKeys,this);this.createChildScopesWindows=n(this.createChildScopesWindows,this);this.onMarkerModelsReady=n(this.onMarkerModelsReady,this);this.watchOurScope=n(this.watchOurScope,this);this.destroy=n(this.destroy,this);this.watchDestroy=n(this.watchDestroy,this);this.watchModels=n(this.watchModels,this);this.watch=n(this.watch,this);var v,y,l,p,a,w=this;for(r.__super__.constructor.call(this,t,i,u,f,e,o,s,h,c),y=this,this.$interpolate=c,this.windows=[],this.windwsIndex=0,this.scopePropNames=["show","coords","templateUrl","templateParameter","isIconVisibleOnClick","closeClick"],a=this.scopePropNames,l=0,p=a.length;p>l;l++)v=a[l],this[v+"Key"]=void 0;this.linked=new directives.api.utils.Linked(t,i,u,f);this.models=void 0;this.contentKeys=void 0;this.isIconVisibleOnClick=void 0;this.firstTime=!0;this.bigGulp=directives.api.utils.AsyncProcessor;this.$log.info(y);this.$timeout(function(){return w.watchOurScope(t),w.createChildScopesWindows()},50)}return i(r,t),r.include(directives.api.utils.ModelsWatcher),r.prototype.watch=function(n,t,i){var r=this;return n.$watch(t,function(n,u){var s,f,h,e,o;if(n!==u){for(r[i]="function"==typeof n?n():n,e=r.windows,o=[],f=0,h=e.length;h>f;f++)s=e[f],o.push(function(n){"use strict";return n.scope[t]="self"===r[i]?n:n[r[i]]}(s));return o}},!0)},r.prototype.watchModels=function(n){var t=this;return n.$watch("models",function(n,i){if(t.didModelsChange(n,i))return(t.destroy(),t.createChildScopesWindows())})},r.prototype.watchDestroy=function(n){var t=this;return n.$on("$destroy",function(){return t.destroy()})},r.prototype.destroy=function(){return _.each(this.windows,function(n){return n.destroy()}),delete this.windows,this.windows=[],this.windowsIndex=0},r.prototype.watchOurScope=function(n){var t=this;return _.each(this.scopePropNames,function(i){var r;return r=i+"Key",t[r]="function"==typeof n[i]?n[i]():n[i],t.watch(n,i,r)})},r.prototype.onMarkerModelsReady=function(n){var t=this;return this.destroy(),this.models=n.models,this.firstTime&&this.watchDestroy(n),this.setContentKeys(n.models),this.bigGulp.handleLargeArray(n.markerModels,function(n){return t.createWindow(n.model,n.gMarker,t.gMap)},function(){},function(){return t.firstTime=!1})},r.prototype.createChildScopesWindows=function(){var n,i,t=this;if(this.isIconVisibleOnClick=!0,angular.isDefined(this.linked.attrs.isiconvisibleonclick)&&(this.isIconVisibleOnClick=this.linked.scope.isIconVisibleOnClick),this.gMap=this.linked.ctrls[0].getMap(),n=this.linked.ctrls.length>1&&null!=this.linked.ctrls[1]?this.linked.ctrls[1].getMarkersScope():void 0,i=angular.isUndefined(this.linked.scope.models),i&&(void 0===n||void 0===n.markerModels&&void 0===n.models))return void this.$log.info("No models to create windows from! Need direct models or models derrived from markers!");if(null!=this.gMap){if(null!=this.linked.scope.models)return this.models=this.linked.scope.models,this.firstTime&&(this.watchModels(this.linked.scope),this.watchDestroy(this.linked.scope)),this.setContentKeys(this.linked.scope.models),this.bigGulp.handleLargeArray(this.linked.scope.models,function(n){"use strict";return t.createWindow(n,void 0,t.gMap)},function(){},function(){"use strict";return t.firstTime=!1});if(n.onMarkerModelsReady=this.onMarkerModelsReady,n.isMarkerModelsReady)return this.onMarkerModelsReady(n)}},r.prototype.setContentKeys=function(n){if(n.length>0)return this.contentKeys=Object.keys(n[0])},r.prototype.createWindow=function(n,t,i){var r,u,f,e=this;return r=this.linked.scope.$new(!1),this.setChildScope(r,n),r.$watch("model",function(n,t){if(n!==t)return e.setChildScope(r,n)},!0),f=this.interpolateContent(this.linked.element.html(),n),u=this.createWindowOptions(t,r,f,this.DEFAULTS),this.windows.push(new directives.api.models.child.WindowChildModel(r,u,this.isIconVisibleOnClick,i,t,this.$http,this.$templateCache,this.$compile,void 0,!0))},r.prototype.setChildScope=function(n,t){var u,f,i,e,r,o=this;for(r=this.scopePropNames,f=function(i){var r,u;return r=i+"Key",u="self"===o[r]?t:t[o[r]],u!==n[i]?n[i]=u:void 0},i=0,e=r.length;e>i;i++)u=r[i],f(u);return n.model=t},r.prototype.interpolateContent=function(n,t){var e,r,u,i,o,f;if(void 0!==this.contentKeys&&0!==this.contentKeys.length){for(e=this.$interpolate(n),r={},f=this.contentKeys,i=0,o=f.length;o>i;i++)u=f[i],r[u]=t[u];return e(r)}},r}(directives.api.models.parent.IWindowParentModel)})}.call(this),function(){var n=function(n,t){return function(){return n.apply(t,arguments)}},t={}.hasOwnProperty,i=function(n,i){function u(){this.constructor=n}for(var r in i)t.call(i,r)&&(n[r]=i[r]);return u.prototype=i.prototype,n.prototype=new u,n.__super__=i.prototype,n};this.ngGmapModule("directives.api",function(){return this.ILabel=function(t){function r(t){this.link=n(this.link,this);var i;i=this;this.restrict="ECMA";this.replace=!0;this.template=void 0;this.require=void 0;this.transclude=!0;this.priority=-100;this.scope={labelContent:"=content",labelAnchor:"@anchor",labelClass:"@class",labelStyle:"=style"};this.$log=directives.api.utils.Logger;this.$timeout=t}return i(r,t),r.prototype.link=function(){throw new Exception("Not Implemented!!");},r}(oo.BaseObject)})}.call(this),function(){var n=function(n,t){return function(){return n.apply(t,arguments)}},t={}.hasOwnProperty,i=function(n,i){function u(){this.constructor=n}for(var r in i)t.call(i,r)&&(n[r]=i[r]);return u.prototype=i.prototype,n.prototype=new u,n.__super__=i.prototype,n};this.ngGmapModule("directives.api",function(){return this.IMarker=function(t){function r(t){this.link=n(this.link,this);var i;i=this;this.$log=directives.api.utils.Logger;this.$timeout=t;this.restrict="ECMA";this.require="^googleMap";this.priority=-1;this.transclude=!0;this.replace=!0;this.scope={coords:"=coords",icon:"=icon",click:"&click",options:"=options",events:"=events"}}return i(r,t),r.prototype.controller=["$scope","$element",function(){throw new Exception("Not Implemented!!");}],r.prototype.link=function(){throw new Exception("Not implemented!!");},r}(oo.BaseObject)})}.call(this),function(){var n=function(n,t){return function(){return n.apply(t,arguments)}},t={}.hasOwnProperty,i=function(n,i){function u(){this.constructor=n}for(var r in i)t.call(i,r)&&(n[r]=i[r]);return u.prototype=i.prototype,n.prototype=new u,n.__super__=i.prototype,n};this.ngGmapModule("directives.api",function(){return this.IWindow=function(t){function r(t,i,r,u){var f;this.$timeout=t;this.$compile=i;this.$http=r;this.$templateCache=u;this.link=n(this.link,this);f=this;this.restrict="ECMA";this.template=void 0;this.transclude=!0;this.priority=-100;this.require=void 0;this.replace=!0;this.scope={coords:"=coords",show:"=show",templateUrl:"=templateurl",templateParameter:"=templateparameter",isIconVisibleOnClick:"=isiconvisibleonclick",closeClick:"&closeclick",options:"=options"};this.$log=directives.api.utils.Logger}return i(r,t),r.include(directives.api.utils.ChildEvents),r.prototype.link=function(){throw new Exception("Not Implemented!!");},r}(oo.BaseObject)})}.call(this),function(){var n=function(n,t){return function(){return n.apply(t,arguments)}},t={}.hasOwnProperty,i=function(n,i){function u(){this.constructor=n}for(var r in i)t.call(i,r)&&(n[r]=i[r]);return u.prototype=i.prototype,n.prototype=new u,n.__super__=i.prototype,n};this.ngGmapModule("directives.api",function(){return this.Label=function(t){function r(t){this.link=n(this.link,this);var i;r.__super__.constructor.call(this,t);i=this;this.require="^marker";this.template='<span class="angular-google-maps-marker-label" ng-transclude><\/span>';this.$log.info(this)}return i(r,t),r.prototype.link=function(n,t,i,r){return this.$timeout(function(){var i,t;return t=r.getMarkerScope().gMarker,null!=t&&(i=new directives.api.models.child.MarkerLabelChildModel(t,n)),n.$on("$destroy",function(){return i.destroy()})},directives.api.utils.GmapUtil.defaultDelay+25)},r}(directives.api.ILabel)})}.call(this),function(){var n=function(n,t){return function(){return n.apply(t,arguments)}},t={}.hasOwnProperty,i=function(n,i){function u(){this.constructor=n}for(var r in i)t.call(i,r)&&(n[r]=i[r]);return u.prototype=i.prototype,n.prototype=new u,n.__super__=i.prototype,n};this.ngGmapModule("directives.api",function(){return this.Layer=function(t){function r(t){this.$timeout=t;this.link=n(this.link,this);this.$log=directives.api.utils.Logger;this.restrict="ECMA";this.require="^googleMap";this.priority=-1;this.transclude=!0;this.template='<span class="angular-google-map-layer" ng-transclude><\/span>';this.replace=!0;this.scope={show:"=show",type:"=type",namespace:"=namespace",options:"=options",onCreated:"&oncreated"}}return i(r,t),r.prototype.link=function(n,t,i,r){return null!=i.oncreated?new directives.api.models.parent.LayerParentModel(n,t,i,r,this.$timeout,n.onCreated):new directives.api.models.parent.LayerParentModel(n,t,i,r,this.$timeout)},r}(oo.BaseObject)})}.call(this),function(){var n=function(n,t){return function(){return n.apply(t,arguments)}},t={}.hasOwnProperty,i=function(n,i){function u(){this.constructor=n}for(var r in i)t.call(i,r)&&(n[r]=i[r]);return u.prototype=i.prototype,n.prototype=new u,n.__super__=i.prototype,n};this.ngGmapModule("directives.api",function(){return this.Marker=function(t){function r(t){this.link=n(this.link,this);var i;r.__super__.constructor.call(this,t);i=this;this.template='<span class="angular-google-map-marker" ng-transclude><\/span>';this.$log.info(this)}return i(r,t),r.prototype.controller=["$scope","$element",function(n){return{getMarkerScope:function(){return n}}}],r.prototype.link=function(n,t,i,r){return new directives.api.models.parent.MarkerParentModel(n,t,i,r,this.$timeout)},r}(directives.api.IMarker)})}.call(this),function(){var n=function(n,t){return function(){return n.apply(t,arguments)}},t={}.hasOwnProperty,i=function(n,i){function u(){this.constructor=n}for(var r in i)t.call(i,r)&&(n[r]=i[r]);return u.prototype=i.prototype,n.prototype=new u,n.__super__=i.prototype,n};this.ngGmapModule("directives.api",function(){return this.Markers=function(t){function r(t){this.link=n(this.link,this);var i;r.__super__.constructor.call(this,t);i=this;this.template='<span class="angular-google-map-markers" ng-transclude><\/span>';this.scope.models="=models";this.scope.doCluster="=docluster";this.scope.clusterOptions="=clusteroptions";this.scope.fit="=fit";this.scope.labelContent="=labelcontent";this.scope.labelAnchor="@labelanchor";this.scope.labelClass="@labelclass";this.$timeout=t;this.$log.info(this)}return i(r,t),r.prototype.controller=["$scope","$element",function(n){return{getMarkersScope:function(){return n}}}],r.prototype.link=function(n,t,i,r){return new directives.api.models.parent.MarkersParentModel(n,t,i,r,this.$timeout)},r}(directives.api.IMarker)})}.call(this),function(){var n=function(n,t){return function(){return n.apply(t,arguments)}},t={}.hasOwnProperty,i=function(n,i){function u(){this.constructor=n}for(var r in i)t.call(i,r)&&(n[r]=i[r]);return u.prototype=i.prototype,n.prototype=new u,n.__super__=i.prototype,n};this.ngGmapModule("directives.api",function(){return this.Window=function(t){function r(t,i,u,f){this.link=n(this.link,this);var e;r.__super__.constructor.call(this,t,i,u,f);e=this;this.require=["^googleMap","^?marker"];this.template='<span class="angular-google-maps-window" ng-transclude><\/span>';this.$log.info(e)}return i(r,t),r.include(directives.api.utils.GmapUtil),r.prototype.link=function(n,t,i,r){var u=this;return this.$timeout(function(){var e,l,o,s,h,c,a,f;return o=!0,angular.isDefined(i.isiconvisibleonclick)&&(o=n.isIconVisibleOnClick),s=r[0].getMap(),h=r.length>1&&null!=r[1]?r[1].getMarkerScope().gMarker:void 0,e=null!=n.options?n.options:{},l=null!=n&&null!=n.coords&&null!=n.coords.latitude&&null!=n.coords.longitude,a=l?u.createWindowOptions(h,n,t.html(),e):e,null!=s&&(f=new directives.api.models.child.WindowChildModel(n,a,o,s,h,u.$http,u.$templateCache,u.$compile,t)),n.$on("$destroy",function(){return f.destroy()}),null!=r[1]&&(c=r[1].getMarkerScope(),c.$watch("coords",function(n){if(null==n)return f.hideWindow()}),c.$watch("coords.latitude",function(n,t){if(n!==t)return f.getLatestPosition()})),null!=u.onChildCreation&&null!=f?u.onChildCreation(f):void 0},directives.api.utils.GmapUtil.defaultDelay+25)},r}(directives.api.IWindow)})}.call(this),function(){var n=function(n,t){return function(){return n.apply(t,arguments)}},t={}.hasOwnProperty,i=function(n,i){function u(){this.constructor=n}for(var r in i)t.call(i,r)&&(n[r]=i[r]);return u.prototype=i.prototype,n.prototype=new u,n.__super__=i.prototype,n};this.ngGmapModule("directives.api",function(){return this.Windows=function(t){function r(t,i,u,f,e){this.link=n(this.link,this);var o;r.__super__.constructor.call(this,t,i,u,f);o=this;this.$interpolate=e;this.require=["^googleMap","^?markers"];this.template='<span class="angular-google-maps-windows" ng-transclude><\/span>';this.scope.models="=models";this.$log.info(o)}return i(r,t),r.prototype.link=function(n,t,i,r){return new directives.api.models.parent.WindowsParentModel(n,t,i,r,this.$timeout,this.$compile,this.$http,this.$templateCache,this.$interpolate)},r}(directives.api.IWindow)})}.call(this),function(){angular.module("google-maps").directive("googleMap",["$log","$timeout",function(n){var r,i,t;return t=function(n){return angular.isDefined(n)&&null!==n&&n===!0||"1"===n||"y"===n||"true"===n},directives.api.utils.Logger.logger=n,r={mapTypeId:google.maps.MapTypeId.ROADMAP},i=function(n){return new google.maps.LatLng(n.latitude,n.longitude)},{self:this,restrict:"ECMA",transclude:!0,replace:!1,template:'<div class="angular-google-map"><div class="angular-google-map-container"><\/div><div ng-transclude style="display: none"><\/div><\/div>',scope:{center:"=center",zoom:"=zoom",dragging:"=dragging",control:"=",windows:"=windows",options:"=options",events:"=events",styles:"=styles",bounds:"=bounds"},controller:["$scope",function(n){return{getMap:function(){return n.map}}}],link:function(u,f,e){var h,a,c,v,s,l,y,o;if(!angular.isDefined(u.center)||!angular.isDefined(u.center.latitude)||!angular.isDefined(u.center.longitude))return void n.error("angular-google-maps: could not find a valid center property");if(!angular.isDefined(u.zoom))return void n.error("angular-google-maps: map zoom property not set");if(a=angular.element(f),a.addClass("angular-google-map"),s={options:{}},e.options&&(s.options=u.options),e.styles&&(s.styles=u.styles),e.type&&(y=e.type.toUpperCase(),google.maps.MapTypeId.hasOwnProperty(y)?s.mapTypeId=google.maps.MapTypeId[e.type.toUpperCase()]:n.error('angular-google-maps: invalid map type "'+e.type+'"')),o=new google.maps.Map(a.find("div")[1],angular.extend({},r,s,{center:new google.maps.LatLng(u.center.latitude,u.center.longitude),draggable:t(e.draggable),zoom:u.zoom,bounds:u.bounds})),h=!1,google.maps.event.addListener(o,"dragstart",function(){return h=!0,_.defer(function(){return u.$apply(function(n){if(null!=n.dragging)return n.dragging=h})})}),google.maps.event.addListener(o,"dragend",function(){return h=!1,_.defer(function(){return u.$apply(function(n){if(null!=n.dragging)return n.dragging=h})})}),google.maps.event.addListener(o,"drag",function(){var n;return n=o.center,_.defer(function(){return u.$apply(function(t){return t.center.latitude=n.lat(),t.center.longitude=n.lng()})})}),google.maps.event.addListener(o,"zoom_changed",function(){if(u.zoom!==o.zoom)return _.defer(function(){return u.$apply(function(n){return n.zoom=o.zoom})})}),l=!1,google.maps.event.addListener(o,"center_changed",function(){var n;return n=o.center,l?void 0:_.defer(function(){return u.$apply(function(t){if(!o.dragging&&(t.center.latitude!==n.lat()&&(t.center.latitude=n.lat()),t.center.longitude!==n.lng()))return t.center.longitude=n.lng()})})}),google.maps.event.addListener(o,"idle",function(){var n,t,i;return n=o.getBounds(),t=n.getNorthEast(),i=n.getSouthWest(),_.defer(function(){return u.$apply(function(n){if(null!==n.bounds&&void 0!==n.bounds&&void 0!==n.bounds)return(n.bounds.northeast={latitude:t.lat(),longitude:t.lng()},n.bounds.southwest={latitude:i.lat(),longitude:i.lng()})})})}),angular.isDefined(u.events)&&null!==u.events&&angular.isObject(u.events)){v=function(n){return function(){return u.events[n].apply(u,[o,n,arguments])}};for(c in u.events)u.events.hasOwnProperty(c)&&angular.isFunction(u.events[c])&&google.maps.event.addListener(o,c,v(c))}return u.map=o,null!=e.control&&null!=u.control&&(u.control.refresh=function(n){var r;if(null!=o)return google.maps.event.trigger(o,"resize"),null!=(null!=n?n.latitude:void 0)&&null!=(null!=n?n.latitude:void 0)?(r=i(n),t(e.pan)?o.panTo(r):o.setCenter(r)):void 0},u.control.getGMap=function(){return o}),u.$watch("center",function(r,f){var s;return s=i(r),r===f||s.lat()===o.center.lat()&&s.lng()===o.center.lng()?void 0:(l=!0,h||((null==r.latitude||null==r.longitude)&&n.error("Invalid center for newValue: "+JSON.stringify(r)),t(e.pan)&&u.zoom===o.zoom?o.panTo(s):o.setCenter(s)),l=!1)},!0),u.$watch("zoom",function(n,t){if(n!==t&&n!==o.zoom)return _.defer(o.setZoom(n))}),u.$watch("bounds",function(t,i){var r,u,f;if(t!==i)return null==t.northeast.latitude||null==t.northeast.longitude||null==t.southwest.latitude||null==t.southwest.longitude?void n.error("Invalid map bounds for new value: "+JSON.stringify(t)):(u=new google.maps.LatLng(t.northeast.latitude,t.northeast.longitude),f=new google.maps.LatLng(t.southwest.latitude,t.southwest.longitude),r=new google.maps.LatLngBounds(f,u),o.fitBounds(r))}),u.$watch("options",function(n,t){if(!_.isEqual(n,t)&&(s.options=n,null!=o))return o.setOptions(s)},!0),u.$watch("styles",function(n,t){if(!_.isEqual(n,t)&&(s.styles=n,null!=o))return o.setOptions(s)},!0)}}}])}.call(this),function(){angular.module("google-maps").directive("marker",["$timeout",function(n){return new directives.api.Marker(n)}])}.call(this),function(){angular.module("google-maps").directive("markers",["$timeout",function(n){return new directives.api.Markers(n)}])}.call(this),function(){angular.module("google-maps").directive("markerLabel",["$log","$timeout",function(n,t){return new directives.api.Label(t)}])}.call(this),function(){angular.module("google-maps").directive("polygon",["$log","$timeout",function(n,t){var u,f,i,r,e;return e=function(n){for(var t=0;t<n.length;){if(angular.isUndefined(n[t].latitude)||angular.isUndefined(n[t].longitude))return!1;t++}return!0},f=function(n){for(var i=new google.maps.MVCArray,t=0;t<n.length;)i.push(new google.maps.LatLng(n[t].latitude,n[t].longitude)),t++;return i},i=function(n,t){for(var r=new google.maps.LatLngBounds,i=0;i<t.length;)r.extend(t.getAt(i)),i++;return n.fitBounds(r)},r=function(n){return angular.isDefined(n)&&null!==n&&n===!0||"1"===n||"y"===n||"true"===n},u={},{restrict:"ECA",require:"^googleMap",replace:!0,scope:{path:"=path",stroke:"=stroke",clickable:"=",draggable:"=",editable:"=",geodesic:"=",icons:"=icons",visible:"="},link:function(o,s,h,c){return angular.isUndefined(o.path)||null===o.path||o.path.length<2||!e(o.path)?void n.error("polyline: no valid path attribute found"):t(function(){var e,v,s,y,l,a,t,n;return e=c.getMap(),y=f(o.path),v=angular.extend({},u,{map:e,path:y,strokeColor:o.stroke&&o.stroke.color,strokeOpacity:o.stroke&&o.stroke.opacity,strokeWeight:o.stroke&&o.stroke.weight}),angular.forEach({clickable:!0,draggable:!1,editable:!1,geodesic:!1,visible:!0},function(n,t){return v[t]=angular.isUndefined(o[t])||null===o[t]?n:o[t]}),n=new google.maps.Polyline(v),r(h.fit)&&i(e,y),angular.isDefined(o.editable)&&o.$watch("editable",function(t){return n.setEditable(t)}),angular.isDefined(o.draggable)&&o.$watch("draggable",function(t){return n.setDraggable(t)}),angular.isDefined(o.visible)&&o.$watch("visible",function(t){return n.setVisible(t)}),a=void 0,s=void 0,l=void 0,t=n.getPath(),a=google.maps.event.addListener(t,"set_at",function(n){var i;return i=t.getAt(n),i&&i.lng&&i.lat?(o.path[n].latitude=i.lat(),o.path[n].longitude=i.lng(),o.$apply()):void 0}),s=google.maps.event.addListener(t,"insert_at",function(n){var i;return i=t.getAt(n),i&&i.lng&&i.lat?(o.path.splice(n,0,{latitude:i.lat(),longitude:i.lng()}),o.$apply()):void 0}),l=google.maps.event.addListener(t,"remove_at",function(n){return o.path.splice(n,1),o.$apply()}),o.$watch("path",function(t){var u,a,s,f,o,c,l;if(o=n.getPath(),t!==o){if(!t)return n.setMap(null);for(n.setMap(e),u=0,c=o.getLength(),s=t.length,a=Math.min(c,s);a>u;)l=o.getAt(u),f=t[u],(l.lat()!==f.latitude||l.lng()!==f.longitude)&&o.setAt(u,new google.maps.LatLng(f.latitude,f.longitude)),u++;for(;s>u;)f=t[u],o.push(new google.maps.LatLng(f.latitude,f.longitude)),u++;for(;c>u;)o.pop(),u++;if(r(h.fit))return i(e,o)}},!0),o.$on("$destroy",function(){return n.setMap(null),a(),a=null,s(),s=null,l(),l=null})})}}}])}.call(this),function(){angular.module("google-maps").directive("polyline",["$log","$timeout","array-sync",function(n,t,i){var r,u,f,e,o;return o=function(n){for(var t=0;t<n.length;){if(angular.isUndefined(n[t].latitude)||angular.isUndefined(n[t].longitude))return!1;t++}return!0},u=function(n){for(var i=new google.maps.MVCArray,t=0;t<n.length;)i.push(new google.maps.LatLng(n[t].latitude,n[t].longitude)),t++;return i},f=function(n,t){for(var r=new google.maps.LatLngBounds,i=0;i<t.length;)r.extend(t.getAt(i)),i++;return n.fitBounds(r)},e=function(n){return angular.isDefined(n)&&null!==n&&n===!0||"1"===n||"y"===n||"true"===n},r={},{restrict:"ECA",replace:!0,require:"^googleMap",scope:{path:"=path",stroke:"=stroke",clickable:"=",draggable:"=",editable:"=",geodesic:"=",icons:"=icons",visible:"="},link:function(s,h,c,l){return angular.isUndefined(s.path)||null===s.path||s.path.length<2||!o(s.path)?void n.error("polyline: no valid path attribute found"):t(function(){var o,t,h,n;return t=function(n){var t;return t=angular.extend({},r,{map:h,path:n,strokeColor:s.stroke&&s.stroke.color,strokeOpacity:s.stroke&&s.stroke.opacity,strokeWeight:s.stroke&&s.stroke.weight}),angular.forEach({clickable:!0,draggable:!1,editable:!1,geodesic:!1,visible:!0},function(n,i){return t[i]=angular.isUndefined(s[i])||null===s[i]?n:s[i]}),t},h=l.getMap(),n=new google.maps.Polyline(t(u(s.path))),e(c.fit)&&f(h,pathPoints),angular.isDefined(s.editable)&&s.$watch("editable",function(t){return n.setEditable(t)}),angular.isDefined(s.draggable)&&s.$watch("draggable",function(t){return n.setDraggable(t)}),angular.isDefined(s.visible)&&s.$watch("visible",function(t){return n.setVisible(t)}),angular.isDefined(s.geodesic)&&s.$watch("geodesic",function(){return n.setOptions(t(n.getPath()))}),angular.isDefined(s.stroke)&&angular.isDefined(s.stroke.weight)&&s.$watch("stroke.weight",function(){return n.setOptions(t(n.getPath()))}),angular.isDefined(s.stroke)&&angular.isDefined(s.stroke.color)&&s.$watch("stroke.color",function(){return n.setOptions(t(n.getPath()))}),o=i(n.getPath(),s,"path"),s.$on("$destroy",function(){return n.setMap(null),o?(o(),o=null):void 0})})}}}])}.call(this),function(){angular.module("google-maps").directive("window",["$timeout","$compile","$http","$templateCache",function(n,t,i,r){return new directives.api.Window(n,t,i,r)}])}.call(this),function(){angular.module("google-maps").directive("windows",["$timeout","$compile","$http","$templateCache","$interpolate",function(n,t,i,r,u){return new directives.api.Windows(n,t,i,r,u)}])}.call(this),function(){angular.module("google-maps").directive("layer",["$timeout",function(n){return new directives.api.Layer(n)}])}.call(this);InfoBox.prototype=new google.maps.OverlayView;InfoBox.prototype.createInfoBoxDiv_=function(){var n,t,i,u=this,r=function(n){n.cancelBubble=!0;n.stopPropagation&&n.stopPropagation()},f=function(n){n.returnValue=!1;n.preventDefault&&n.preventDefault();u.enableEventPropagation_||r(n)};if(!this.div_){if(this.div_=document.createElement("div"),this.setBoxStyle_(),"undefined"==typeof this.content_.nodeType?this.div_.innerHTML=this.getCloseBoxImg_()+this.content_:(this.div_.innerHTML=this.getCloseBoxImg_(),this.div_.appendChild(this.content_)),this.getPanes()[this.pane_].appendChild(this.div_),this.addClickHandler_(),this.div_.style.width?this.fixedWidthSet_=!0:0!==this.maxWidth_&&this.div_.offsetWidth>this.maxWidth_?(this.div_.style.width=this.maxWidth_,this.div_.style.overflow="auto",this.fixedWidthSet_=!0):(i=this.getBoxWidths_(),this.div_.style.width=this.div_.offsetWidth-i.left-i.right+"px",this.fixedWidthSet_=!1),this.panBox_(this.disableAutoPan_),!this.enableEventPropagation_){for(this.eventListeners_=[],t=["mousedown","mouseover","mouseout","mouseup","click","dblclick","touchstart","touchend","touchmove"],n=0;n<t.length;n++)this.eventListeners_.push(google.maps.event.addDomListener(this.div_,t[n],r));this.eventListeners_.push(google.maps.event.addDomListener(this.div_,"mouseover",function(){"use strict";this.style.cursor="default"}))}this.contextListener_=google.maps.event.addDomListener(this.div_,"contextmenu",f);google.maps.event.trigger(this,"domready")}};InfoBox.prototype.getCloseBoxImg_=function(){var n="";return""!==this.closeBoxURL_&&(n="<img",n+=" src='"+this.closeBoxURL_+"'",n+=" align=right",n+=" style='",n+=" position: relative;",n+=" cursor: pointer;",n+=" margin: "+this.closeBoxMargin_+";",n+="'>"),n};InfoBox.prototype.addClickHandler_=function(){var n;""!==this.closeBoxURL_?(n=this.div_.firstChild,this.closeListener_=google.maps.event.addDomListener(n,"click",this.getCloseClickHandler_())):this.closeListener_=null};InfoBox.prototype.getCloseClickHandler_=function(){var n=this;return function(t){t.cancelBubble=!0;t.stopPropagation&&t.stopPropagation();google.maps.event.trigger(n,"closeclick");n.close()}};InfoBox.prototype.panBox_=function(n){var i,y,e=0,f=0;if(!n&&(i=this.getMap(),i instanceof google.maps.Map)){i.getBounds().contains(this.position_)||i.setCenter(this.position_);y=i.getBounds();var l=i.getDiv(),a=l.offsetWidth,o=l.offsetHeight,s=this.pixelOffset_.width,r=this.pixelOffset_.height,v=this.div_.offsetWidth,h=this.div_.offsetHeight,c=this.infoBoxClearance_.width,u=this.infoBoxClearance_.height,t=this.getProjection().fromLatLngToContainerPixel(this.position_);(t.x<-s+c?e=t.x+s-c:t.x+v+s+c>a&&(e=t.x+v+s+c-a),this.alignBottom_?t.y<-r+u+h?f=t.y+r-u-h:t.y+r+u>o&&(f=t.y+r+u-o):t.y<-r+u?f=t.y+r-u:t.y+h+r+u>o&&(f=t.y+h+r+u-o),0!==e||0!==f)&&(i.getCenter(),i.panBy(e,f))}};InfoBox.prototype.setBoxStyle_=function(){var n,t;if(this.div_){this.div_.className=this.boxClass_;this.div_.style.cssText="";t=this.boxStyle_;for(n in t)t.hasOwnProperty(n)&&(this.div_.style[n]=t[n]);"undefined"!=typeof this.div_.style.opacity&&""!==this.div_.style.opacity&&(this.div_.style.filter="alpha(opacity="+100*this.div_.style.opacity+")");this.div_.style.position="absolute";this.div_.style.visibility="hidden";null!==this.zIndex_&&(this.div_.style.zIndex=this.zIndex_)}};InfoBox.prototype.getBoxWidths_=function(){var i,n={top:0,bottom:0,left:0,right:0},t=this.div_;return document.defaultView&&document.defaultView.getComputedStyle?(i=t.ownerDocument.defaultView.getComputedStyle(t,""),i&&(n.top=parseInt(i.borderTopWidth,10)||0,n.bottom=parseInt(i.borderBottomWidth,10)||0,n.left=parseInt(i.borderLeftWidth,10)||0,n.right=parseInt(i.borderRightWidth,10)||0)):document.documentElement.currentStyle&&t.currentStyle&&(n.top=parseInt(t.currentStyle.borderTopWidth,10)||0,n.bottom=parseInt(t.currentStyle.borderBottomWidth,10)||0,n.left=parseInt(t.currentStyle.borderLeftWidth,10)||0,n.right=parseInt(t.currentStyle.borderRightWidth,10)||0),n};InfoBox.prototype.onRemove=function(){this.div_&&(this.div_.parentNode.removeChild(this.div_),this.div_=null)};InfoBox.prototype.draw=function(){this.createInfoBoxDiv_();var n=this.getProjection().fromLatLngToDivPixel(this.position_);this.div_.style.left=n.x+this.pixelOffset_.width+"px";this.alignBottom_?this.div_.style.bottom=-(n.y+this.pixelOffset_.height)+"px":this.div_.style.top=n.y+this.pixelOffset_.height+"px";this.div_.style.visibility=this.isHidden_?"hidden":"visible"};InfoBox.prototype.setOptions=function(n){"undefined"!=typeof n.boxClass&&(this.boxClass_=n.boxClass,this.setBoxStyle_());"undefined"!=typeof n.boxStyle&&(this.boxStyle_=n.boxStyle,this.setBoxStyle_());"undefined"!=typeof n.content&&this.setContent(n.content);"undefined"!=typeof n.disableAutoPan&&(this.disableAutoPan_=n.disableAutoPan);"undefined"!=typeof n.maxWidth&&(this.maxWidth_=n.maxWidth);"undefined"!=typeof n.pixelOffset&&(this.pixelOffset_=n.pixelOffset);"undefined"!=typeof n.alignBottom&&(this.alignBottom_=n.alignBottom);"undefined"!=typeof n.position&&this.setPosition(n.position);"undefined"!=typeof n.zIndex&&this.setZIndex(n.zIndex);"undefined"!=typeof n.closeBoxMargin&&(this.closeBoxMargin_=n.closeBoxMargin);"undefined"!=typeof n.closeBoxURL&&(this.closeBoxURL_=n.closeBoxURL);"undefined"!=typeof n.infoBoxClearance&&(this.infoBoxClearance_=n.infoBoxClearance);"undefined"!=typeof n.isHidden&&(this.isHidden_=n.isHidden);"undefined"!=typeof n.visible&&(this.isHidden_=!n.visible);"undefined"!=typeof n.enableEventPropagation&&(this.enableEventPropagation_=n.enableEventPropagation);this.div_&&this.draw()};InfoBox.prototype.setContent=function(n){this.content_=n;this.div_&&(this.closeListener_&&(google.maps.event.removeListener(this.closeListener_),this.closeListener_=null),this.fixedWidthSet_||(this.div_.style.width=""),"undefined"==typeof n.nodeType?this.div_.innerHTML=this.getCloseBoxImg_()+n:(this.div_.innerHTML=this.getCloseBoxImg_(),this.div_.appendChild(n)),this.fixedWidthSet_||(this.div_.style.width=this.div_.offsetWidth+"px","undefined"==typeof n.nodeType?this.div_.innerHTML=this.getCloseBoxImg_()+n:(this.div_.innerHTML=this.getCloseBoxImg_(),this.div_.appendChild(n))),this.addClickHandler_());google.maps.event.trigger(this,"content_changed")};InfoBox.prototype.setPosition=function(n){this.position_=n;this.div_&&this.draw();google.maps.event.trigger(this,"position_changed")};InfoBox.prototype.setZIndex=function(n){this.zIndex_=n;this.div_&&(this.div_.style.zIndex=n);google.maps.event.trigger(this,"zindex_changed")};InfoBox.prototype.setVisible=function(n){this.isHidden_=!n;this.div_&&(this.div_.style.visibility=this.isHidden_?"hidden":"visible")};InfoBox.prototype.getContent=function(){return this.content_};InfoBox.prototype.getPosition=function(){return this.position_};InfoBox.prototype.getZIndex=function(){return this.zIndex_};InfoBox.prototype.getVisible=function(){return"undefined"==typeof this.getMap()||null===this.getMap()?!1:!this.isHidden_};InfoBox.prototype.show=function(){this.isHidden_=!1;this.div_&&(this.div_.style.visibility="visible")};InfoBox.prototype.hide=function(){this.isHidden_=!0;this.div_&&(this.div_.style.visibility="hidden")};InfoBox.prototype.open=function(n,t){var i=this;t&&(this.position_=t.getPosition(),this.moveListener_=google.maps.event.addListener(t,"position_changed",function(){i.setPosition(this.getPosition())}));this.setMap(n);this.div_&&this.panBox_()};InfoBox.prototype.close=function(){var n;if(this.closeListener_&&(google.maps.event.removeListener(this.closeListener_),this.closeListener_=null),this.eventListeners_){for(n=0;n<this.eventListeners_.length;n++)google.maps.event.removeListener(this.eventListeners_[n]);this.eventListeners_=null}this.moveListener_&&(google.maps.event.removeListener(this.moveListener_),this.moveListener_=null);this.contextListener_&&(google.maps.event.removeListener(this.contextListener_),this.contextListener_=null);this.setMap(null)};ClusterIcon.prototype.onAdd=function(){var t,i,n=this;this.div_=document.createElement("div");this.div_.className=this.className_;this.visible_&&this.show();this.getPanes().overlayMouseTarget.appendChild(this.div_);this.boundsChangedListener_=google.maps.event.addListener(this.getMap(),"bounds_changed",function(){i=t});google.maps.event.addDomListener(this.div_,"mousedown",function(){t=!0;i=!1});google.maps.event.addDomListener(this.div_,"click",function(r){if(t=!1,!i){var e,f,u=n.cluster_.getMarkerClusterer();google.maps.event.trigger(u,"click",n.cluster_);google.maps.event.trigger(u,"clusterclick",n.cluster_);u.getZoomOnClick()&&(f=u.getMaxZoom(),e=n.cluster_.getBounds(),u.getMap().fitBounds(e),setTimeout(function(){"use strict";u.getMap().fitBounds(e);null!==f&&u.getMap().getZoom()>f&&u.getMap().setZoom(f+1)},100));r.cancelBubble=!0;r.stopPropagation&&r.stopPropagation()}});google.maps.event.addDomListener(this.div_,"mouseover",function(){var t=n.cluster_.getMarkerClusterer();google.maps.event.trigger(t,"mouseover",n.cluster_)});google.maps.event.addDomListener(this.div_,"mouseout",function(){var t=n.cluster_.getMarkerClusterer();google.maps.event.trigger(t,"mouseout",n.cluster_)})};ClusterIcon.prototype.onRemove=function(){this.div_&&this.div_.parentNode&&(this.hide(),google.maps.event.removeListener(this.boundsChangedListener_),google.maps.event.clearInstanceListeners(this.div_),this.div_.parentNode.removeChild(this.div_),this.div_=null)};ClusterIcon.prototype.draw=function(){if(this.visible_){var n=this.getPosFromLatLng_(this.center_);this.div_.style.top=n.y+"px";this.div_.style.left=n.x+"px"}};ClusterIcon.prototype.hide=function(){this.div_&&(this.div_.style.display="none");this.visible_=!1};ClusterIcon.prototype.show=function(){if(this.div_){var n="",r=this.backgroundPosition_.split(" "),t=parseInt(r[0].trim(),10),i=parseInt(r[1].trim(),10),u=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(u);n="<img src='"+this.url_+"' style='position: absolute; top: "+i+"px; left: "+t+"px; ";this.cluster_.getMarkerClusterer().enableRetinaIcons_||(n+="clip: rect("+-1*i+"px, "+(-1*t+this.width_)+"px, "+(-1*i+this.height_)+"px, "+-1*t+"px);");n+="'>";this.div_.innerHTML=n+"<div style='position: absolute;top: "+this.anchorText_[0]+"px;left: "+this.anchorText_[1]+"px;color: "+this.textColor_+";font-size: "+this.textSize_+"px;font-family: "+this.fontFamily_+";font-weight: "+this.fontWeight_+";font-style: "+this.fontStyle_+";text-decoration: "+this.textDecoration_+";text-align: center;width: "+this.width_+"px;line-height:"+this.height_+"px;'>"+this.sums_.text+"<\/div>";this.div_.title="undefined"==typeof this.sums_.title||""===this.sums_.title?this.cluster_.getMarkerClusterer().getTitle():this.sums_.title;this.div_.style.display=""}this.visible_=!0};ClusterIcon.prototype.useStyle=function(n){var i,t;this.sums_=n;i=Math.max(0,n.index-1);i=Math.min(this.styles_.length-1,i);t=this.styles_[i];this.url_=t.url;this.height_=t.height;this.width_=t.width;this.anchorText_=t.anchorText||[0,0];this.anchorIcon_=t.anchorIcon||[parseInt(this.height_/2,10),parseInt(this.width_/2,10)];this.textColor_=t.textColor||"black";this.textSize_=t.textSize||11;this.textDecoration_=t.textDecoration||"none";this.fontWeight_=t.fontWeight||"bold";this.fontStyle_=t.fontStyle||"normal";this.fontFamily_=t.fontFamily||"Arial,sans-serif";this.backgroundPosition_=t.backgroundPosition||"0 0"};ClusterIcon.prototype.setCenter=function(n){this.center_=n};ClusterIcon.prototype.createCss=function(n){var t=[];return t.push("cursor: pointer;"),t.push("position: absolute; top: "+n.y+"px; left: "+n.x+"px;"),t.push("width: "+this.width_+"px; height: "+this.height_+"px;"),t.join("")};ClusterIcon.prototype.getPosFromLatLng_=function(n){var t=this.getProjection().fromLatLngToDivPixel(n);return t.x-=this.anchorIcon_[1],t.y-=this.anchorIcon_[0],t.x=parseInt(t.x,10),t.y=parseInt(t.y,10),t};Cluster.prototype.getSize=function(){return this.markers_.length};Cluster.prototype.getMarkers=function(){return this.markers_};Cluster.prototype.getCenter=function(){return this.center_};Cluster.prototype.getMap=function(){return this.map_};Cluster.prototype.getMarkerClusterer=function(){return this.markerClusterer_};Cluster.prototype.getBounds=function(){for(var t=new google.maps.LatLngBounds(this.center_,this.center_),i=this.getMarkers(),n=0;n<i.length;n++)t.extend(i[n].getPosition());return t};Cluster.prototype.remove=function(){this.clusterIcon_.setMap(null);this.markers_=[];delete this.markers_};Cluster.prototype.addMarker=function(n){var t,i,u;if(this.isMarkerAlreadyAdded_(n))return!1;if(this.center_){if(this.averageCenter_){var r=this.markers_.length+1,f=(this.center_.lat()*(r-1)+n.getPosition().lat())/r,e=(this.center_.lng()*(r-1)+n.getPosition().lng())/r;this.center_=new google.maps.LatLng(f,e);this.calculateBounds_()}}else this.center_=n.getPosition(),this.calculateBounds_();if(n.isAdded=!0,this.markers_.push(n),i=this.markers_.length,u=this.markerClusterer_.getMaxZoom(),null!==u&&this.map_.getZoom()>u)n.getMap()!==this.map_&&n.setMap(this.map_);else if(i<this.minClusterSize_)n.getMap()!==this.map_&&n.setMap(this.map_);else if(i===this.minClusterSize_)for(t=0;i>t;t++)this.markers_[t].setMap(null);else n.setMap(null);return this.updateIcon_(),!0};Cluster.prototype.isMarkerInClusterBounds=function(n){return this.bounds_.contains(n.getPosition())};Cluster.prototype.calculateBounds_=function(){var n=new google.maps.LatLngBounds(this.center_,this.center_);this.bounds_=this.markerClusterer_.getExtendedBounds(n)};Cluster.prototype.updateIcon_=function(){var r=this.markers_.length,n=this.markerClusterer_.getMaxZoom(),t,i;if(null!==n&&this.map_.getZoom()>n||r<this.minClusterSize_)return void this.clusterIcon_.hide();t=this.markerClusterer_.getStyles().length;i=this.markerClusterer_.getCalculator()(this.markers_,t);this.clusterIcon_.setCenter(this.center_);this.clusterIcon_.useStyle(i);this.clusterIcon_.show()};Cluster.prototype.isMarkerAlreadyAdded_=function(n){var t;if(this.markers_.indexOf)return-1!==this.markers_.indexOf(n);for(t=0;t<this.markers_.length;t++)if(n===this.markers_[t])return!0;return!1};MarkerClusterer.prototype.onAdd=function(){var n=this;this.activeMap_=this.getMap();this.ready_=!0;this.repaint();this.listeners_=[google.maps.event.addListener(this.getMap(),"zoom_changed",function(){n.resetViewport_(!1);(this.getZoom()===(this.get("minZoom")||0)||this.getZoom()===this.get("maxZoom"))&&google.maps.event.trigger(this,"idle")}),google.maps.event.addListener(this.getMap(),"idle",function(){n.redraw_()})]};MarkerClusterer.prototype.onRemove=function(){for(var n=0;n<this.markers_.length;n++)this.markers_[n].getMap()!==this.activeMap_&&this.markers_[n].setMap(this.activeMap_);for(n=0;n<this.clusters_.length;n++)this.clusters_[n].remove();for(this.clusters_=[],n=0;n<this.listeners_.length;n++)google.maps.event.removeListener(this.listeners_[n]);this.listeners_=[];this.activeMap_=null;this.ready_=!1};MarkerClusterer.prototype.draw=function(){};MarkerClusterer.prototype.setupStyles_=function(){var n,t;if(!(this.styles_.length>0))for(n=0;n<this.imageSizes_.length;n++)t=this.imageSizes_[n],this.styles_.push({url:this.imagePath_+(n+1)+"."+this.imageExtension_,height:t,width:t})};MarkerClusterer.prototype.fitMapToMarkers=function(){for(var t=this.getMarkers(),i=new google.maps.LatLngBounds,n=0;n<t.length;n++)i.extend(t[n].getPosition());this.getMap().fitBounds(i)};MarkerClusterer.prototype.getGridSize=function(){return this.gridSize_};MarkerClusterer.prototype.setGridSize=function(n){this.gridSize_=n};MarkerClusterer.prototype.getMinimumClusterSize=function(){return this.minClusterSize_};MarkerClusterer.prototype.setMinimumClusterSize=function(n){this.minClusterSize_=n};MarkerClusterer.prototype.getMaxZoom=function(){return this.maxZoom_};MarkerClusterer.prototype.setMaxZoom=function(n){this.maxZoom_=n};MarkerClusterer.prototype.getStyles=function(){return this.styles_};MarkerClusterer.prototype.setStyles=function(n){this.styles_=n};MarkerClusterer.prototype.getTitle=function(){return this.title_};MarkerClusterer.prototype.setTitle=function(n){this.title_=n};MarkerClusterer.prototype.getZoomOnClick=function(){return this.zoomOnClick_};MarkerClusterer.prototype.setZoomOnClick=function(n){this.zoomOnClick_=n};MarkerClusterer.prototype.getAverageCenter=function(){return this.averageCenter_};MarkerClusterer.prototype.setAverageCenter=function(n){this.averageCenter_=n};MarkerClusterer.prototype.getIgnoreHidden=function(){return this.ignoreHidden_};MarkerClusterer.prototype.setIgnoreHidden=function(n){this.ignoreHidden_=n};MarkerClusterer.prototype.getEnableRetinaIcons=function(){return this.enableRetinaIcons_};MarkerClusterer.prototype.setEnableRetinaIcons=function(n){this.enableRetinaIcons_=n};MarkerClusterer.prototype.getImageExtension=function(){return this.imageExtension_};MarkerClusterer.prototype.setImageExtension=function(n){this.imageExtension_=n};MarkerClusterer.prototype.getImagePath=function(){return this.imagePath_};MarkerClusterer.prototype.setImagePath=function(n){this.imagePath_=n};MarkerClusterer.prototype.getImageSizes=function(){return this.imageSizes_};MarkerClusterer.prototype.setImageSizes=function(n){this.imageSizes_=n};MarkerClusterer.prototype.getCalculator=function(){return this.calculator_};MarkerClusterer.prototype.setCalculator=function(n){this.calculator_=n};MarkerClusterer.prototype.getBatchSizeIE=function(){return this.batchSizeIE_};MarkerClusterer.prototype.setBatchSizeIE=function(n){this.batchSizeIE_=n};MarkerClusterer.prototype.getClusterClass=function(){return this.clusterClass_};MarkerClusterer.prototype.setClusterClass=function(n){this.clusterClass_=n};MarkerClusterer.prototype.getMarkers=function(){return this.markers_};MarkerClusterer.prototype.getTotalMarkers=function(){return this.markers_.length};MarkerClusterer.prototype.getClusters=function(){return this.clusters_};MarkerClusterer.prototype.getTotalClusters=function(){return this.clusters_.length};MarkerClusterer.prototype.addMarker=function(n,t){this.pushMarkerTo_(n);t||this.redraw_()};MarkerClusterer.prototype.addMarkers=function(n,t){for(var i in n)n.hasOwnProperty(i)&&this.pushMarkerTo_(n[i]);t||this.redraw_()};MarkerClusterer.prototype.pushMarkerTo_=function(n){if(n.getDraggable()){var t=this;google.maps.event.addListener(n,"dragend",function(){"use strict";t.ready_&&(this.isAdded=!1,t.repaint())})}n.isAdded=!1;this.markers_.push(n)};MarkerClusterer.prototype.removeMarker=function(n,t){var i=this.removeMarker_(n);return!t&&i&&this.repaint(),i};MarkerClusterer.prototype.removeMarkers=function(n,t){for(var u,r=!1,i=0;i<n.length;i++)u=this.removeMarker_(n[i]),r=r||u;return!t&&r&&this.repaint(),r};MarkerClusterer.prototype.removeMarker_=function(n){var t,i=-1;if(this.markers_.indexOf)i=this.markers_.indexOf(n);else for(t=0;t<this.markers_.length;t++)if(n===this.markers_[t]){i=t;break}return-1===i?!1:(n.setMap(null),this.markers_.splice(i,1),!0)};MarkerClusterer.prototype.clearMarkers=function(){this.resetViewport_(!0);this.markers_=[]};MarkerClusterer.prototype.repaint=function(){var n=this.clusters_.slice();this.clusters_=[];this.resetViewport_(!1);this.redraw_();setTimeout(function(){for(var t=0;t<n.length;t++)n[t].remove()},0)};MarkerClusterer.prototype.getExtendedBounds=function(n){var t=this.getProjection(),e=new google.maps.LatLng(n.getNorthEast().lat(),n.getNorthEast().lng()),o=new google.maps.LatLng(n.getSouthWest().lat(),n.getSouthWest().lng()),r=t.fromLatLngToDivPixel(e),i,u,f;return r.x+=this.gridSize_,r.y-=this.gridSize_,i=t.fromLatLngToDivPixel(o),i.x-=this.gridSize_,i.y+=this.gridSize_,u=t.fromDivPixelToLatLng(r),f=t.fromDivPixelToLatLng(i),n.extend(u),n.extend(f),n};MarkerClusterer.prototype.redraw_=function(){this.createClusters_(0)};MarkerClusterer.prototype.resetViewport_=function(n){for(var i,t=0;t<this.clusters_.length;t++)this.clusters_[t].remove();for(this.clusters_=[],t=0;t<this.markers_.length;t++)i=this.markers_[t],i.isAdded=!1,n&&i.setMap(null)};MarkerClusterer.prototype.distanceBetweenPoints_=function(n,t){var i=(t.lat()-n.lat())*Math.PI/180,r=(t.lng()-n.lng())*Math.PI/180,u=Math.sin(i/2)*Math.sin(i/2)+Math.cos(n.lat()*Math.PI/180)*Math.cos(t.lat()*Math.PI/180)*Math.sin(r/2)*Math.sin(r/2),f=2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u));return 6371*f};MarkerClusterer.prototype.isMarkerInBounds_=function(n,t){return t.contains(n.getPosition())};MarkerClusterer.prototype.addToClosestCluster_=function(n){for(var u,t,f,e=4e4,r=null,i=0;i<this.clusters_.length;i++)t=this.clusters_[i],f=t.getCenter(),f&&(u=this.distanceBetweenPoints_(f,n.getPosition()),e>u&&(e=u,r=t));r&&r.isMarkerInClusterBounds(n)?r.addMarker(n):(t=new Cluster(this),t.addMarker(n),this.clusters_.push(t))};MarkerClusterer.prototype.createClusters_=function(n){var i,t,u,e=this,f,r;if(this.ready_){for(0===n&&(google.maps.event.trigger(this,"clusteringbegin",this),"undefined"!=typeof this.timerRefStatic&&(clearTimeout(this.timerRefStatic),delete this.timerRefStatic)),u=this.getMap().getZoom()>3?new google.maps.LatLngBounds(this.getMap().getBounds().getSouthWest(),this.getMap().getBounds().getNorthEast()):new google.maps.LatLngBounds(new google.maps.LatLng(85.020707717434718,-178.48388434375),new google.maps.LatLng(-85.081364443845445,178.00048865625)),f=this.getExtendedBounds(u),r=Math.min(n+this.batchSize_,this.markers_.length),i=n;r>i;i++)t=this.markers_[i],!t.isAdded&&this.isMarkerInBounds_(t,f)&&(!this.ignoreHidden_||this.ignoreHidden_&&t.getVisible())&&this.addToClosestCluster_(t);r<this.markers_.length?this.timerRefStatic=setTimeout(function(){"use strict";e.createClusters_(r)},0):(delete this.timerRefStatic,google.maps.event.trigger(this,"clusteringend",this))}};MarkerClusterer.prototype.extend=function(n,t){return function(n){for(var t in n.prototype)this.prototype[t]=n.prototype[t];return this}.apply(n,[t])};MarkerClusterer.CALCULATOR=function(n,t){for(var i=0,u=n.length.toString(),r=u;0!==r;)r=parseInt(r/10,10),i++;return i=Math.min(i,t),{text:u,index:i,title:""}};MarkerClusterer.BATCH_SIZE=2e3;MarkerClusterer.BATCH_SIZE_IE=500;MarkerClusterer.IMAGE_PATH="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclustererplus/images/m";MarkerClusterer.IMAGE_EXTENSION="png";MarkerClusterer.IMAGE_SIZES=[53,56,66,78,90];"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});inherits(MarkerLabel_,google.maps.OverlayView);MarkerLabel_.getSharedCross=function(n){var t;return"undefined"==typeof MarkerLabel_.getSharedCross.crossDiv&&(t=document.createElement("img"),t.style.cssText="position: absolute; z-index: 1000002; display: none;",t.style.marginLeft="-8px",t.style.marginTop="-9px",t.src=n,MarkerLabel_.getSharedCross.crossDiv=t),MarkerLabel_.getSharedCross.crossDiv};MarkerLabel_.prototype.onAdd=function(){var o,s,h,f,i,c,l,n=this,r=!1,t=!1,u=20,a="url("+this.handCursorURL_+")",e=function(n){n.preventDefault&&n.preventDefault();n.cancelBubble=!0;n.stopPropagation&&n.stopPropagation()},v=function(){n.marker_.setAnimation(null)};this.getPanes().overlayImage.appendChild(this.labelDiv_);this.getPanes().overlayMouseTarget.appendChild(this.eventDiv_);"undefined"==typeof MarkerLabel_.getSharedCross.processed&&(this.getPanes().overlayImage.appendChild(this.crossDiv_),MarkerLabel_.getSharedCross.processed=!0);this.listeners_=[google.maps.event.addDomListener(this.eventDiv_,"mouseover",function(t){(n.marker_.getDraggable()||n.marker_.getClickable())&&(this.style.cursor="pointer",google.maps.event.trigger(n.marker_,"mouseover",t))}),google.maps.event.addDomListener(this.eventDiv_,"mouseout",function(i){(n.marker_.getDraggable()||n.marker_.getClickable())&&!t&&(this.style.cursor=n.marker_.getCursor(),google.maps.event.trigger(n.marker_,"mouseout",i))}),google.maps.event.addDomListener(this.eventDiv_,"mousedown",function(i){t=!1;n.marker_.getDraggable()&&(r=!0,this.style.cursor=a);(n.marker_.getDraggable()||n.marker_.getClickable())&&(google.maps.event.trigger(n.marker_,"mousedown",i),e(i))}),google.maps.event.addDomListener(document,"mouseup",function(e){var s;if(r&&(r=!1,n.eventDiv_.style.cursor="pointer",google.maps.event.trigger(n.marker_,"mouseup",e)),t){if(i){s=n.getProjection().fromLatLngToDivPixel(n.marker_.getPosition());s.y+=u;n.marker_.setPosition(n.getProjection().fromDivPixelToLatLng(s));try{n.marker_.setAnimation(google.maps.Animation.BOUNCE);setTimeout(v,1406)}catch(h){}}n.crossDiv_.style.display="none";n.marker_.setZIndex(o);f=!0;t=!1;e.latLng=n.marker_.getPosition();google.maps.event.trigger(n.marker_,"dragend",e)}}),google.maps.event.addListener(n.marker_.getMap(),"mousemove",function(f){var e;r&&(t?(f.latLng=new google.maps.LatLng(f.latLng.lat()-s,f.latLng.lng()-h),e=n.getProjection().fromLatLngToDivPixel(f.latLng),i&&(n.crossDiv_.style.left=e.x+"px",n.crossDiv_.style.top=e.y+"px",n.crossDiv_.style.display="",e.y-=u),n.marker_.setPosition(n.getProjection().fromDivPixelToLatLng(e)),i&&(n.eventDiv_.style.top=e.y+u+"px"),google.maps.event.trigger(n.marker_,"drag",f)):(s=f.latLng.lat()-n.marker_.getPosition().lat(),h=f.latLng.lng()-n.marker_.getPosition().lng(),o=n.marker_.getZIndex(),c=n.marker_.getPosition(),l=n.marker_.getMap().getCenter(),i=n.marker_.get("raiseOnDrag"),t=!0,n.marker_.setZIndex(1e6),f.latLng=n.marker_.getPosition(),google.maps.event.trigger(n.marker_,"dragstart",f)))}),google.maps.event.addDomListener(document,"keydown",function(r){t&&27===r.keyCode&&(i=!1,n.marker_.setPosition(c),n.marker_.getMap().setCenter(l),google.maps.event.trigger(document,"mouseup",r))}),google.maps.event.addDomListener(this.eventDiv_,"click",function(t){(n.marker_.getDraggable()||n.marker_.getClickable())&&(f?f=!1:(google.maps.event.trigger(n.marker_,"click",t),e(t)))}),google.maps.event.addDomListener(this.eventDiv_,"dblclick",function(t){(n.marker_.getDraggable()||n.marker_.getClickable())&&(google.maps.event.trigger(n.marker_,"dblclick",t),e(t))}),google.maps.event.addListener(this.marker_,"dragstart",function(){t||(i=this.get("raiseOnDrag"))}),google.maps.event.addListener(this.marker_,"drag",function(){t||i&&(n.setPosition(u),n.labelDiv_.style.zIndex=1e6+(this.get("labelInBackground")?-1:1))}),google.maps.event.addListener(this.marker_,"dragend",function(){t||i&&n.setPosition(0)}),google.maps.event.addListener(this.marker_,"position_changed",function(){n.setPosition()}),google.maps.event.addListener(this.marker_,"zindex_changed",function(){n.setZIndex()}),google.maps.event.addListener(this.marker_,"visible_changed",function(){n.setVisible()}),google.maps.event.addListener(this.marker_,"labelvisible_changed",function(){n.setVisible()}),google.maps.event.addListener(this.marker_,"title_changed",function(){n.setTitle()}),google.maps.event.addListener(this.marker_,"labelcontent_changed",function(){n.setContent()}),google.maps.event.addListener(this.marker_,"labelanchor_changed",function(){n.setAnchor()}),google.maps.event.addListener(this.marker_,"labelclass_changed",function(){n.setStyles()}),google.maps.event.addListener(this.marker_,"labelstyle_changed",function(){n.setStyles()})]};MarkerLabel_.prototype.onRemove=function(){var n;for(null!==this.labelDiv_.parentNode&&this.labelDiv_.parentNode.removeChild(this.labelDiv_),null!==this.eventDiv_.parentNode&&this.eventDiv_.parentNode.removeChild(this.eventDiv_),n=0;n<this.listeners_.length;n++)google.maps.event.removeListener(this.listeners_[n])};MarkerLabel_.prototype.draw=function(){this.setContent();this.setTitle();this.setStyles()};MarkerLabel_.prototype.setContent=function(){var n=this.marker_.get("labelContent");"undefined"==typeof n.nodeType?(this.labelDiv_.innerHTML=n,this.eventDiv_.innerHTML=this.labelDiv_.innerHTML):(this.labelDiv_.innerHTML="",this.labelDiv_.appendChild(n),n=n.cloneNode(!0),this.eventDiv_.appendChild(n))};MarkerLabel_.prototype.setTitle=function(){this.eventDiv_.title=this.marker_.getTitle()||""};MarkerLabel_.prototype.setStyles=function(){var n,t;this.labelDiv_.className=this.marker_.get("labelClass");this.eventDiv_.className=this.labelDiv_.className;this.labelDiv_.style.cssText="";this.eventDiv_.style.cssText="";t=this.marker_.get("labelStyle");for(n in t)t.hasOwnProperty(n)&&(this.labelDiv_.style[n]=t[n],this.eventDiv_.style[n]=t[n]);this.setMandatoryStyles()};MarkerLabel_.prototype.setMandatoryStyles=function(){this.labelDiv_.style.position="absolute";this.labelDiv_.style.overflow="hidden";"undefined"!=typeof this.labelDiv_.style.opacity&&""!==this.labelDiv_.style.opacity&&(this.labelDiv_.style.MsFilter='"progid:DXImageTransform.Microsoft.Alpha(opacity='+100*this.labelDiv_.style.opacity+')"',this.labelDiv_.style.filter="alpha(opacity="+100*this.labelDiv_.style.opacity+")");this.eventDiv_.style.position=this.labelDiv_.style.position;this.eventDiv_.style.overflow=this.labelDiv_.style.overflow;this.eventDiv_.style.opacity=.01;this.eventDiv_.style.MsFilter='"progid:DXImageTransform.Microsoft.Alpha(opacity=1)"';this.eventDiv_.style.filter="alpha(opacity=1)";this.setAnchor();this.setPosition();this.setVisible()};MarkerLabel_.prototype.setAnchor=function(){var n=this.marker_.get("labelAnchor");this.labelDiv_.style.marginLeft=-n.x+"px";this.labelDiv_.style.marginTop=-n.y+"px";this.eventDiv_.style.marginLeft=-n.x+"px";this.eventDiv_.style.marginTop=-n.y+"px"};MarkerLabel_.prototype.setPosition=function(n){var t=this.getProjection().fromLatLngToDivPixel(this.marker_.getPosition());"undefined"==typeof n&&(n=0);this.labelDiv_.style.left=Math.round(t.x)+"px";this.labelDiv_.style.top=Math.round(t.y-n)+"px";this.eventDiv_.style.left=this.labelDiv_.style.left;this.eventDiv_.style.top=this.labelDiv_.style.top;this.setZIndex()};MarkerLabel_.prototype.setZIndex=function(){var n=this.marker_.get("labelInBackground")?-1:1;"undefined"==typeof this.marker_.getZIndex()?(this.labelDiv_.style.zIndex=parseInt(this.labelDiv_.style.top,10)+n,this.eventDiv_.style.zIndex=this.labelDiv_.style.zIndex):(this.labelDiv_.style.zIndex=this.marker_.getZIndex()+n,this.eventDiv_.style.zIndex=this.labelDiv_.style.zIndex)};MarkerLabel_.prototype.setVisible=function(){this.labelDiv_.style.display=this.marker_.get("labelVisible")?this.marker_.getVisible()?"block":"none":"none";this.eventDiv_.style.display=this.labelDiv_.style.display};inherits(MarkerWithLabel,google.maps.Marker);MarkerWithLabel.prototype.setMap=function(n){google.maps.Marker.prototype.setMap.apply(this,arguments);this.label.setMap(n)};angular.module("toaster",["ngAnimate"]).service("toaster",["$rootScope",function(n){this.pop=function(t,i,r,u,f){this.toast={type:t,title:i,body:r,timeout:u,bodyOutputType:f};n.$broadcast("toaster-newToast")};this.clear=function(){n.$broadcast("toaster-clearToasts")}}]).constant("toasterConfig",{limit:0,"tap-to-dismiss":!0,"newest-on-top":!0,"time-out":5e3,"icon-classes":{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},"body-output-type":"","body-template":"toasterBodyTmpl.html","icon-class":"toast-info","position-class":"toast-top-right","title-class":"toast-title","message-class":"toast-message"}).directive("toasterContainer",["$compile","$timeout","$sce","toasterConfig","toaster",function(n,t,i,r,u){return{replace:!0,restrict:"EA",link:function(n,f,e){function h(t){t.type=o["icon-classes"][t.type];t.type||(t.type=o["icon-class"]);s++;angular.extend(t,{id:s});t.bodyOutputType=t.bodyOutputType||o["body-output-type"];switch(t.bodyOutputType){case"trustedHtml":t.html=i.trustAsHtml(t.body);break;case"template":t.bodyTemplate=o["body-template"]}var r=typeof t.timeout=="number"?t.timeout:o["time-out"];r>0&&c(t,r);o["newest-on-top"]===!0?(n.toasters.unshift(t),o.limit>0&&n.toasters.length>o.limit&&n.toasters.pop()):(n.toasters.push(t),o.limit>0&&n.toasters.length>o.limit&&n.toasters.shift())}function c(i,r){i.timeout=t(function(){n.removeToast(i.id)},r)}var s=0,o=r;e.toasterOptions&&angular.extend(o,n.$eval(e.toasterOptions));n.config={position:o["position-class"],title:o["title-class"],message:o["message-class"],tap:o["tap-to-dismiss"]};n.toasters=[];n.$on("toaster-newToast",function(){h(u.toast)});n.$on("toaster-clearToasts",function(){n.toasters.splice(0,n.toasters.length)})},controller:["$scope","$element","$attrs",function(n){n.stopTimer=function(n){n.timeout&&t.cancel(n.timeout)};n.removeToast=function(t){var i=0;for(i;i<n.toasters.length;i++)if(n.toasters[i].id===t)break;n.toasters.splice(i,1)};n.remove=function(t){n.config.tap===!0&&n.removeToast(t)}}],template:'<div  id="toast-container" ng-class="config.position"><div ng-repeat="toaster in toasters" class="toast" ng-class="toaster.type" ng-click="remove(toaster.id)" ng-mouseover="stopTimer(toaster)"><div ng-class="config.title">{{toaster.title}}<\/div><div ng-class="config.message" ng-switch on="toaster.bodyOutputType"><div ng-switch-when="trustedHtml" ng-bind-html="toaster.html"><\/div><div ng-switch-when="template"><div ng-include="toaster.bodyTemplate"><\/div><\/div><div ng-switch-default >{{toaster.body}}<\/div><\/div><\/div><\/div>'}}]),function(n,t){n.module(t.dependencies.controllers,[])}(window.angular,window.appSettings),function(n,t){n.module(t.dependencies.services,[t.dependencies.firebaseLogin,t.dependencies.firebaseService])}(window.angular,window.appSettings),function(n,t){n.module(t.dependencies.filters,[]).filter("interpolate",["version",function(n){return function(t){return String(t).replace(/\%VERSION\%/mg,n)}}]).filter("reverse",function(){function t(t){var i,r=[];if(t)if(n.isArray(t))r=t;else if(typeof t=="object")for(i in t)t.hasOwnProperty(i)&&r.push(t[i]);return r}return function(n){return t(n).slice().reverse()}})}(window.angular,window.appSettings),function(n,t){n.module(t.dependencies.directives,[]).directive("appVersion",["version",function(n){return function(t,i){i.text(n)}}])}(window.angular,window.appSettings),function(n,t){function u(n){var t=new Date(n),i=t.getTime(),r=t.getTimezoneOffset()*6e4;return new Date(i+r)}var r=n.module(t.appName),i=function(t){function i(n){this.latitude=n.latitude;this.longitude=n.longitude;this.title=n.title;this.user=n.user;this.date=u(new Date(n.date))}return n.extend(this,t),i.prototype.toasterTitle=function(){return this.user.email+" has just checked in at "+this.latitude+", "+this.longitude+"."},i.prototype.toMarkerOptions=function(){return{latitude:this.latitude,longitude:this.longitude,user:this.user,date:this.date}},new i(t)};i.create=function(n){return new i(n)};r.factory("Location",function(){return i})}(window.angular,window.appSettings),function(n,t){var i=n.module(t.dependencies.controllers);i.controller("HomeCtrl",["$scope","$rootScope","$window",function(n,t,i){n.goToLogin=function(){i.location="#!/login"};n.goToRegister=function(){i.location="#!/login?q=register"}}])}(window.angular,window.appSettings),function(n,t){var i=n.module(t.dependencies.controllers);i.controller("AccountCtrl",["$scope","loginService","syncData","$location",function(n,t,i){function r(){return{email:n.auth.user.email,oldpass:n.oldpass,newpass:n.newpass,confirm:n.confirm,callback:function(t){t?n.err=t:(n.oldpass=null,n.newpass=null,n.confirm=null,n.msg="Password updated!")}}}i(["users",n.auth.user.uid]).$bind(n,"user");n.logout=function(){t.logout()};n.oldpass=null;n.newpass=null;n.confirm=null;n.initials=null;n.reset=function(){n.err=null;n.msg=null};n.updatePassword=function(){n.reset();t.changePassword(r())}}])}(window.angular,window.appSettings),function(n,t){var i=n.module(t.dependencies.controllers);i.controller("LoginCtrl",["$scope","$rootScope","loginService","$location","Firebase",function(n,t,i,r){function u(){return n.email?n.pass?n.pass!==n.confirm?n.err="Passwords do not match":n.initials||(n.err="Enter your initials"):n.err="Please enter a password":n.err="Please enter an email address",!n.err}n.email=null;n.pass=null;n.confirm=null;n.createMode=r.search().q?!0:!1;n.initials=null;n.login=function(r){n.err=null;n.email?n.pass?i.login(n.email,n.pass,function(i,u){n.err=i?i+"":null;i||(t.user=u,r&&r(u))}):n.err="Please enter a password":n.err="Please enter an email address"};n.createAccount=function(){n.err=null;u()&&i.createAccount(n.email,n.pass,function(r){r?n.err=r?r+"":null:n.login(function(r){i.createProfile(r.uid,r.email,n.initials);t.user.initials=n.initials})})}}])}(window.angular,window.appSettings),function(n,t){var i=n.module(t.dependencies.controllers);i.controller("LogoutCtrl",["$scope","$rootScope","loginService","$window","$location",function(n,t,i,r){i.logout();r.location="/#!/home";t.user=null}])}(window.angular,window.appSettings),function(n,t,i,r){var u=n.module(appSettings.dependencies.controllers);u.controller("MapCtrl",["$scope","$rootScope","$window","Location","$firebase","toaster","FBURL",function(n,t,i,u,f,e,o){var h=new Firebase(o),c=h.child("locations"),s;n.locations=f(c);n.supportsGeo=i.navigator;n.locationMarkers=[];n.locations.$on("loaded",function(t){r.each(t,function(t){n.locationMarkers.push(t)});n.map.center=n.locationMarkers[n.locationMarkers.length-1]});n.checkIn=function(){n.supportsGeo&&i.navigator.geolocation.getCurrentPosition(function(t){var i=u.create({latitude:t.coords.latitude,longitude:t.coords.longitude,user:n.user,date:new Date});n.locations.$add(i);n.map.center=i},function(n){console.error(n)})};n.setCenter=function(t){n.map.center=t};s=function(n){n.showWindow=!0};n.map={center:{latitude:39.7643389,longitude:-104.8551114},zoom:15,markers:n.locationMarkers};r.each(n.map.markers,function(t){t.closeClick=function(){t.showWindow=!1;n.$apply()};t.onClicked=function(){s(t)}})}])}(window.angular,window.appSettings,google,_),function(n,t){var i=n.module(t.dependencies.controllers);i.controller("ChatCtrl",["$scope","$rootScope","$window","$location","syncData",function(n,t,i,r,u){n.messages=u("messages",100);n.addMessage=function(){n.newMessage&&(n.messages.$add({user:t.user.initials,text:n.newMessage}),n.newMessage=null)};n.enterMessage=function(t){t.which==13&&n.addMessage()}}])}(window.angular,window.appSettings);
/*
//# sourceMappingURL=firemap.min.js.map
*/