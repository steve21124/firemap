(function(n){function t(n,t,i,r){this._route=i;this._location=n;this._rootScope=t;this._loginPath=r;this._redirectTo=null;this._authenticated=!!(t.auth&&t.auth.user);this._init()}n.module("routeSecurity",[]).run(["$injector","$location","$rootScope","loginRedirectPath",function(n,i,r,u){n.has("$route")&&new t(i,r,n.get("$route"),u)}]);t.prototype={_init:function(){var t=this;this._checkCurrent();t._rootScope.$on("$routeChangeStart",function(n,i){t._authRequiredRedirect(i,t._loginPath)});t._rootScope.$on("$firebaseSimpleLogin:login",n.bind(this,this._login));t._rootScope.$on("$firebaseSimpleLogin:logout",n.bind(this,this._logout));t._rootScope.$on("$firebaseSimpleLogin:error",n.bind(this,this._error))},_checkCurrent:function(){this._route.current&&this._authRequiredRedirect(this._route.current,this._loginPath)},_login:function(){this._authenticated=!0;this._redirectTo?(this._redirect(this._redirectTo),this._redirectTo=null):this._location.path()===this._loginPath&&(this._location.replace(),this._location.path("/"))},_logout:function(){this._authenticated=!1;this._checkCurrent()},_error:function(){this._rootScope.auth&&this._rootScope.auth.user||(this._authenticated=!1);this._checkCurrent()},_redirect:function(n){this._location.replace();this._location.path(n)},_authRequiredRedirect:function(n,t){n.authRequired&&!this._authenticated?(this._redirectTo=n.pathTo===undefined?this._location.path():n.pathTo===t?"/":n.pathTo,this._redirect(t)):this._authenticated&&this._location.path()===this._loginPath&&this._redirect("/")}}})(angular);
/*
//# sourceMappingURL=module.routeSecurity.min.js.map
*/