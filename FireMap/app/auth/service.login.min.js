(function(n,t){"use strict";n.module("firebase.service.login",["firebase",t.dependencies.firebaseService]).factory("loginService",["$rootScope","$firebaseSimpleLogin","firebaseRef","profileCreator","$timeout",function(n,t,i,r,u){function e(){if(f===null)throw new Error("Must call loginService.init() before using its methods");}var f=null;return{init:function(){return f=t(i())},login:function(n,t,i){e();f.$login("password",{email:n,password:t,rememberMe:!0}).then(function(n){i&&u(function(){i(null,n)})},i)},logout:function(){e();f.$logout()},changePassword:function(n){e();var t=n.callback||function(){};n.oldpass&&n.newpass?n.newpass!==n.confirm?u(function(){t("Passwords do not match")}):f.$changePassword(n.email,n.oldpass,n.newpass).then(function(){t&&t(null)},t):u(function(){t("Please enter a password")})},createAccount:function(n,t,i){e();f.$createUser(n,t).then(function(n){i&&i(null,n)},i)},createProfile:r}}]).factory("profileCreator",["firebaseRef","$timeout",function(n,t){return function(i,r,u,f){function e(n){return o(n.substr(0,n.indexOf("@"))||"")}function o(n){n+="";var t=n.charAt(0).toUpperCase();return t+n.substr(1)}n("users/"+i).set({email:r,name:e(r),initials:u},function(n){f&&t(function(){f(n)})})}}])})(window.angular,window.appSettings);
/*
//# sourceMappingURL=service.login.min.js.map
*/